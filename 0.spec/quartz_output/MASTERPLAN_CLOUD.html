<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>MASTERPLAN_CLOUD</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="Quartz 4"/><meta property="og:title" content="MASTERPLAN_CLOUD"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="MASTERPLAN_CLOUD"/><meta name="twitter:description" content="Cloud Infrastructure Master Plan v2 Project: Diego’s Cloud Infrastructure CTO: Claude (Opus) Date: 2025-12-11 Status: PLANNING COMPLETE - READY FOR IMPLEMENTATION Executive Summary This master plan is a Product-Engineer Handoff Document defining Diego’s cloud infrastructure: A) HANDOFF - WHAT we&amp;#03..."/><meta property="og:description" content="Cloud Infrastructure Master Plan v2 Project: Diego’s Cloud Infrastructure CTO: Claude (Opus) Date: 2025-12-11 Status: PLANNING COMPLETE - READY FOR IMPLEMENTATION Executive Summary This master plan is a Product-Engineer Handoff Document defining Diego’s cloud infrastructure: A) HANDOFF - WHAT we&amp;#03..."/><meta property="og:image:alt" content="Cloud Infrastructure Master Plan v2 Project: Diego’s Cloud Infrastructure CTO: Claude (Opus) Date: 2025-12-11 Status: PLANNING COMPLETE - READY FOR IMPLEMENTATION Executive Summary This master plan is a Product-Engineer Handoff Document defining Diego’s cloud infrastructure: A) HANDOFF - WHAT we&amp;#03..."/><meta property="twitter:domain" content="quartz.jzhao.xyz"/><meta property="og:url" content="https://quartz.jzhao.xyz/MASTERPLAN_CLOUD"/><meta property="twitter:url" content="https://quartz.jzhao.xyz/MASTERPLAN_CLOUD"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="Cloud Infrastructure Master Plan v2 Project: Diego’s Cloud Infrastructure CTO: Claude (Opus) Date: 2025-12-11 Status: PLANNING COMPLETE - READY FOR IMPLEMENTATION Executive Summary This master plan is a Product-Engineer Handoff Document defining Diego’s cloud infrastructure: A) HANDOFF - WHAT we&amp;#03..."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL3RtcC9xdWFydHotdGVzdC9xdWFydHovY29tcG9uZW50cy9zdHlsZXMiLCJzb3VyY2VzIjpbIm1lcm1haWQuaW5saW5lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7OztBQUtGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlGO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cGFuZC1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC40cmVtO1xuICBtYXJnaW46IDAuM3JlbTtcbiAgcmlnaHQ6IDA7IC8vIE5PVEU6IHJpZ2h0IHdpbGwgYmUgc2V0IGluIG1lcm1haWQuaW5saW5lLnRzXG4gIGNvbG9yOiB2YXIoLS1ncmF5KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICBib3JkZXI6IDFweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiAwLjJzO1xuXG4gICYgPiBzdmcge1xuICAgIGZpbGw6IHZhcigtLWxpZ2h0KTtcbiAgICBmaWx0ZXI6IGNvbnRyYXN0KDAuMyk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpO1xuICB9XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxufVxuXG5wcmUge1xuICAmOmhvdmVyID4gLmV4cGFuZC1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4jbWVybWFpZC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGNvbnRhaW46IGxheW91dDtcbiAgei1pbmRleDogOTk5O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcblxuICAmLmFjdGl2ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgJiA+ICNtZXJtYWlkLXNwYWNlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBoZWlnaHQ6IDgwdmg7XG4gICAgd2lkdGg6IDgwdnc7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgICYgPiAubWVybWFpZC1jb250ZW50IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgbWluLXdpZHRoOiAyMDBweDtcblxuICAgICAgcHJlIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgfVxuICAgIH1cblxuICAgICYgPiAubWVybWFpZC1jb250cm9scyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgICByaWdodDogMjBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgei1pbmRleDogMjtcblxuICAgICAgLm1lcm1haWQtY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyayk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5Rm9udCk7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSByZXNldCBidXR0b24gZGlmZmVyZW50bHlcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="./prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://quartz.jzhao.xyz/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://quartz.jzhao.xyz/MASTERPLAN_CLOUD-og-image.webp"/><meta property="og:image:url" content="https://quartz.jzhao.xyz/MASTERPLAN_CLOUD-og-image.webp"/><meta name="twitter:image" content="https://quartz.jzhao.xyz/MASTERPLAN_CLOUD-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="MASTERPLAN_CLOUD"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">Quartz 4</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-0" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>MASTERPLAN_CLOUD</a></div></nav><h1 class="article-title">MASTERPLAN_CLOUD</h1><p show-comma="true" class="content-meta"><time datetime="2025-12-12T17:37:59.979Z">Dec 12, 2025</time><span>40 min read</span></p></div></div><article class="popover-hint"><h1 id="cloud-infrastructure-master-plan-v2">Cloud Infrastructure Master Plan v2<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cloud-infrastructure-master-plan-v2" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p><strong>Project:</strong> Diego’s Cloud Infrastructure
<strong>CTO:</strong> Claude (Opus)
<strong>Date:</strong> 2025-12-11
<strong>Status:</strong> PLANNING COMPLETE - READY FOR IMPLEMENTATION</p>
<hr/>
<h1 id="executive-summary">Executive Summary<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#executive-summary" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p>This master plan is a <strong>Product-Engineer Handoff Document</strong> defining Diego’s cloud infrastructure:</p>
<blockquote class="callout abstract" data-callout="abstract">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>A) HANDOFF - WHAT we're building </p></div>
                  
                </div>
<div class="callout-content">
<ul>
<li><strong><a href="#a0-products-fridge" class="internal alias">A0) Products (FRIDGE)</a></strong> - Name, Component, Stack, Purpose
<ul>
<li><a href="#terminals" class="internal alias">Terminals</a> - WebTerminal, IDE, AI Chat</li>
<li><a href="#user-productivity" class="internal alias">User Productivity</a> - Mail, Calendar, Sync, Drive, etc.</li>
<li><a href="#user-security" class="internal alias">User Security</a> - VPN, Vault</li>
<li><a href="#user-profiledevelopmentsportfolio" class="internal alias">User Profile/Developments/Portfolio</a> - Linktree, CV, Projects</li>
<li><a href="#user-ais-models" class="internal alias">User AIs Models</a> - Multi-Model → MASTERPLAN_AI.md</li>
</ul>
</li>
<li><strong><a href="#a1-infra-services-kitchen" class="internal alias">A1) Infra Services (KITCHEN)</a></strong>
<ul>
<li><a href="#cloud-control-center-c3" class="internal alias">Cloud Control Center (C3)</a>
<ul>
<li><a href="#a10-front-user-view" class="internal alias">A10) FRONT (User View)</a> - Dashboard &amp; Service Launcher</li>
<li><a href="#a11-control-center-operations" class="internal alias">A11) CONTROL CENTER (Operations)</a> - Monitor, Orchestrate, Workflows</li>
<li><a href="#a12-data--safety-security-layer" class="internal alias">A12) DATA &amp; SAFETY (Security Layer)</a> - Backup, Security</li>
<li><a href="#a13-audit-center" class="internal alias">A13) AUDIT CENTER</a> - Analytics, Audit</li>
</ul>
</li>
<li><a href="#devs-security" class="internal alias">Devs Security</a> - Proxy (NPM), Authelia, OAuth2, VPN</li>
<li><a href="#devs-infrastructure" class="internal alias">Devs Infrastructure</a> - API Gateway, Cache</li>
<li><a href="#tech-definition" class="internal alias">Tech Definition</a> - DevOps, Security, WebDevs stacks</li>
</ul>
</li>
<li><strong><a href="#a2-infra-resources" class="internal alias">A2) Infra Resources</a></strong> - Resource Allocation, Maps, Costs
<ul>
<li><a href="#a20-resource-allocation" class="internal alias">A20) Resource Allocation</a> - VMs, IPs, ports, URLs
<ul>
<li><a href="#a200-resource-estimation" class="internal alias">A200) Resource Estimation</a> - RAM, Storage, Bandwidth</li>
<li><a href="#a201-vm-capacity--headroom" class="internal alias">A201) VM Capacity &amp; Headroom</a> - Capacity vs Allocated</li>
<li><a href="#a202-cost-estimation" class="internal alias">A202) Cost Estimation</a> - Monthly costs breakdown</li>
<li><a href="#a203-urlport-proxied" class="internal alias">A203) URL/Port Proxied</a> - Service URL mapping</li>
</ul>
</li>
<li><a href="#a21-maps--topology" class="internal alias">A21) Maps &amp; Topology</a> - Network diagrams, auth flow</li>
<li><a href="#a22-costs" class="internal alias">A22) Costs</a> - Monthly cost summary</li>
</ul>
</li>
<li><strong><a href="#a3-tech-research" class="internal alias">A3) Tech Research</a></strong> - Framework comparisons
<ul>
<li><a href="#framework-comparison-frontend" class="internal alias">Framework Comparison (Frontend)</a> - Vanilla vs Vue vs Svelte</li>
<li><a href="#framework-comparison-templating---pythonjs-backend" class="internal alias">Framework Comparison (Templating - Python/JS Backend)</a> - Jinja2 vs Mako</li>
<li><a href="#when-to-use" class="internal alias">When to Use</a> - Decision guide for each use case</li>
</ul>
</li>
<li><strong><a href="#a4-today-current-state" class="internal alias">A4) Today (Current State)</a></strong> - Current running state
<ul>
<li><a href="#by-service" class="internal alias">by Service</a> - Service status table</li>
<li><a href="#by-vm" class="internal alias">by VM</a> - VM status table</li>
</ul>
</li>
</ul>
</div>
</blockquote>
<blockquote class="callout example" data-callout="example">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>B) ARCHITECTURE - HOW to build it </p></div>
                  
                </div>
<div class="callout-content">
<ul>
<li><strong><a href="#b1-security-architecture" class="internal alias">B1) Security Architecture</a></strong>
<ul>
<li><a href="#b11-web-auth---dual-authentication" class="internal alias">B11) Web Auth - Dual Authentication</a> - Dual auth, sessions</li>
<li><a href="#b12-dev-access---ssh--vault-management" class="internal alias">B12) Dev Access - SSH &amp; Vault Management</a> - SSH, Vault</li>
<li><a href="#b13-isolation---network-segmentation--hardening" class="internal alias">B13) Isolation - Network Segmentation &amp; Hardening</a> - Network segmentation, firewall</li>
</ul>
</li>
<li><strong><a href="#b2-service-architecture" class="internal alias">B2) Service Architecture</a></strong>
<ul>
<li><a href="#b21-containers---docker-compose-patterns" class="internal alias">B21) Containers - Docker Compose Patterns</a> - Docker Compose patterns</li>
<li><a href="#b22-databases---schemas--migrations" class="internal alias">B22) Databases - Schemas &amp; Migrations</a> - Schemas, migrations, backup</li>
<li><a href="#b23-apis---contracts--versioning" class="internal alias">B23) APIs - Contracts &amp; Versioning</a> - Contracts, OpenAPI specs</li>
</ul>
</li>
<li><strong><a href="#b3-infrastructure-architecture" class="internal alias">B3) Infrastructure Architecture</a></strong>
<ul>
<li><a href="#b31-networking---dns-ssl-reverse-proxy" class="internal alias">B31) Networking - DNS, SSL, Reverse Proxy</a> - DNS, SSL, reverse proxy</li>
<li><a href="#b32-storage---volumes--backups" class="internal alias">B32) Storage - Volumes &amp; Backups</a> - Volumes, backups, DR</li>
<li><a href="#b33-scaling---wake-on-demand--gpu" class="internal alias">B33) Scaling - Wake-on-Demand &amp; GPU</a> - Wake-on-demand, GPU provisioning</li>
</ul>
</li>
</ul>
</div>
</blockquote>
<blockquote class="callout tip" data-callout="tip">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>C) ROADMAP - WHEN to build it </p></div>
                  
                </div>
<div class="callout-content">
<ul>
<li><a href="#c1-phases---implementation-milestones" class="internal alias">C1) Phases - Implementation Milestones</a> - Implementation milestones</li>
<li><a href="#c2-dependencies---service-graph" class="internal alias">C2) Dependencies - Service Graph</a> - Service dependency graph</li>
<li><a href="#c3-backlog---prioritized-tasks" class="internal alias">C3) Backlog - Prioritized Tasks</a> - Prioritized task list</li>
</ul>
</div>
</blockquote>
<blockquote class="callout info" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>D) DEVOPS - HOW to operate it </p></div>
                  
                </div>
<div class="callout-content">
<ul>
<li><a href="#d1-portal---cloud-control-center-c3" class="internal alias">D1) Portal - Cloud Control Center (C3)</a> - Services access dashboard</li>
<li><a href="#d2-monitoring---uptime-kuma" class="internal alias">D2) Monitoring - Uptime Kuma</a> - Metrics, alerts, health checks</li>
<li><a href="#d3-knowledge-center" class="internal alias">D3) Knowledge Center</a> - Architecture docs, Wiki/FAQ</li>
<li><a href="#d4-code-practices" class="internal alias">D4) Code Practices</a> - Python standards, Docker, Jinja2</li>
<li><a href="#d5-system-practices" class="internal alias">D5) System Practices</a> - Poetry, pipx, nvm, backups</li>
</ul>
</div>
</blockquote>
<p><strong>Document Purpose:</strong></p>
<ul>
<li><strong>A = WHAT</strong> → Complete service catalog + stack allocation (Product defines, Engineer validates)</li>
<li><strong>B = HOW</strong> → Technical specs for implementation (Engineer owns, Product reviews)</li>
<li><strong>C = WHEN</strong> → Roadmap and prioritization (Product + Engineer collaborate)</li>
<li><strong>D = OPS</strong> → Day-to-day operations (Engineer owns)</li>
</ul>
<hr/>
<h1 id="a-handoff---services--infrastructure-definition">A) HANDOFF - Services &amp; Infrastructure Definition<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a-handoff---services--infrastructure-definition" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="a0-products-fridge">A0) Products (FRIDGE)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a0-products-fridge" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<blockquote>
<p><strong>Layer 1</strong> = Infrastructure tools (Terminals, Sync, etc.) - what you use to BUILD</p>
</blockquote>
<h3 id="terminals">Terminals<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#terminals" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
terminals                | -                    | -                   | AI-Powered Dev Environment
  ↳ terminals-front      | Hub Landing          | SvelteKit 5 + SCSS  | Tool selector UI
                         |                      |                     |
  ├─ terminal            | -                    | -                   | Web Terminal (bash/zsh/fish)
  │    ↳ terminal-front  | Shell Selector       | SvelteKit 5 + SCSS  | Shell selector UI
  │    ↳ terminal-app    | Terminal Server      | ttyd / wetty        | Terminal server
  │    ↳ terminal-db0    | Storage              | Filesystem          | Shell history + dotfiles
                         |                      |                     |
  ├─ ide                 | -                    | -                   | Web IDE
  │    ↳ ide-front       | IDE Launcher         | SvelteKit 5 + SCSS  | IDE launcher + selector
  │    ↳ ide-app         | Code Server          | code-server         | Code server
  │    ↳ ide-db0         | Storage              | Filesystem          | Workspaces + extensions
                         |                      |                     |
  └─ ai-chat             | -                    | -                   | AI Chat Assistant
       ↳ ai-front        | Chat UI              | SvelteKit 5 + SCSS  | Chat interface
       ↳ ai-app          | Chat Backend         | Open WebUI          | Chat backend
       ↳ ai-api          | LLM API              | Ollama / OpenAI     | LLM API backend
       ↳ ai-db0          | Database             | SQL:PostgreSQL      | Chat history + users
</code></pre>
<h3 id="user-productivity">User Productivity<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#user-productivity" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
mail                     | -                    | -                   | Email Suite
  ↳ mail-front           | Reverse Proxy        | Nginx               | Nginx reverse proxy
  ↳ mail-admin           | Admin UI             | Mailu-Admin         | Admin web interface
  ↳ mail-imap            | IMAP Server          | Dovecot             | IMAP server
  ↳ mail-smtp            | SMTP Server          | Postfix             | SMTP server
  ↳ mail-webmail         | Webmail Client       | Roundcube           | Webmail client
  ↳ mail-db0             | Storage              | Maildir             | Mailboxes storage
                         |                      |                     |
calendar                 | -                    | -                   | Calendar &amp; Contacts (CalDAV/CardDAV)
  ↳ calendar-front       | Web UI               | Radicale (built-in) | Radicale web interface
  ↳ calendar-app         | CalDAV Server        | Radicale            | CalDAV/CardDAV server
  ↳ calendar-db0         | Storage              | Filesystem          | Calendar/contact files
                         |                      |                     |
sync                     | -                    | -                   | File Synchronization Hub
  ↳ sync-front           | File Viewer          | SvelteKit 5 + SCSS  | File tree viewer (collapsible)
  ↳ sync-app             | Aggregator           | Python3             | Aggregates drive+git
                         |                      |                     |
  ├─ drive               | -                    | -                   | Cloud Drive (Filesystem Mount)
  │    ↳ drive-front     | File Browser         | SvelteKit 5 + SCSS  | File browser display
  │    ↳ drive-app       | Mount Daemon         | Rclone              | Bisync / FUSE mount daemon
  │    ↳ drive-db0       | Storage              | Filesystem          | Mount configs + cache
                         |                      |                     |
  └─ git                 | -                    | -                   | Git Hosting
       ↳ git-front       | Login UI             | SvelteKit 5 + SCSS  | Login + repo display
       ↳ git-app         | Git Server           | Gitea               | Git server + web UI
       ↳ git-db0         | Database             | SQL:SQLite          | Users, issues, PRs
       ↳ git-db_obj0     | Storage              | Filesystem          | Git repositories (.git objects)
                         |                      |                     |
photos                   | -                    | -                   | Photo Library Management
  ↳ photo-front          | Login UI             | SvelteKit 5 + SCSS  | Login + Front from Photoprism
  ↳ photo-app            | Photo Engine         | Photoprism          | Photo viewer + AI tagging
  ↳ photo-db0            | Database             | SQL:MariaDB         | Metadata (EXIF, location, AI)
  ↳ photo-db_obj0        | Storage              | Filesystem          | Photo files storage
                         |                      |                     |
slides                   | -                    | -                   | Presentation Builder
  ↳ slides-front         | Editor UI            | SvelteKit 5 + SCSS  | Slide editor + preview
  ↳ slides-app           | Converter            | Marp                | Markdown to slides converter
                         |                      |                     |
  ├─ slidev              | -                    | -                   | Fast Slides (Dev-focused)
  │    ↳ slidev-app      | Slides Engine        | Sli.dev             | Interactive slides engine
  │    ↳ slidev-db0      | Storage              | Filesystem          | Slide source files (.md)
                         |                      |                     |
  └─ reveal              | -                    | -                   | Deep Slides (Rich presentations)
       ↳ reveal-app      | Slides Engine        | Reveal.js           | Full-featured slides engine
       ↳ reveal-db0      | Storage              | Filesystem          | Slide source files (.md/.html)
                         |                      |                     |
sheets                   | -                    | -                   | Spreadsheet &amp; Data Processing
  ↳ sheets-front         | Query UI             | SvelteKit 5 + SCSS  | Data viewer + query UI
  ↳ sheets-app           | Orchestrator         | Python3             | Data processing orchestrator
                         |                      |                     |
  ├─ pandas              | -                    | -                   | Standard Data Jobs
  │    ↳ pandas-app      | DataFrame Engine     | Python:Pandas       | DataFrame processing
  │    ↳ pandas-db0      | Storage              | Filesystem          | Data files (.csv, .xlsx, .parquet)
                         |                      |                     |
  └─ xsv                 | -                    | -                   | Heavy Lift &amp; Speed
       ↳ xsv-app         | CSV Engine           | xsv (Rust)          | High-perf CSV processing
       ↳ xsv-db0         | Storage              | Filesystem          | Large data files
                         |                      |                     |
dashboards               | -                    | -                   | Data Dashboards &amp; Notebooks
  ↳ dashboards-front     | Selector UI          | SvelteKit 5 + SCSS  | Dashboard selector UI
  ↳ dashboards-app       | Orchestrator         | Python3             | Dashboard orchestrator
                         |                      |                     |
  ├─ jupyter             | -                    | -                   | Interactive Notebooks
  │    ↳ jupyter-front   | Notebook UI          | JupyterLab (built-in)| JupyterLab interface
  │    ↳ jupyter-app     | Notebook Server      | JupyterLab          | Notebook server + kernels
  │    ↳ jupyter-db0     | Storage              | Filesystem          | Notebooks + workspace
                         |                      |                     |
  └─ dash                | -                    | -                   | Python Dashboards
       ↳ dash-app        | Dashboard Server     | Plotly Dash         | Dashboard server
       ↳ dash-db0        | Storage              | Filesystem          | Dashboard configs + data
                         |                      |                     |
vault                    | -                    | -                   | Password Manager
  ↳ vault-front          | Login UI             | Vaultwarden (built-in)| Vaultwarden web interface
  ↳ vault-app            | Password Server      | Vaultwarden         | Bitwarden self-hosted
  ↳ vault-db0            | Database             | SQL:SQLite          | Encrypted credentials
</code></pre>
<h3 id="user-security">User Security<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#user-security" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────

</code></pre>
<blockquote>
<p><strong>Layer 2</strong> = Built solutions - what you CREATE with those tools</p>
</blockquote>
<h3 id="user-profiledevelopmentsportfolio">User Profile/Developments/Portfolio<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#user-profiledevelopmentsportfolio" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
linktree                 | -                    | -                   | Personal Portfolio &amp; Link Aggregator
  ↳ linktree-front       | Link Hub UI          | Vanilla HTML+CSS+JS | Animated link hub (glassmorphic)
  ↳ linktree-app         | Static Host          | GitHub Pages        | Static site (no backend)
  ↳ linktree-db0         | Storage              | JSON / Markdown     | Links config
                         |                      |                     |
  Sections:              |                      |                     |
    • Professional       | -                    | -                   | LinkedIn, GitHub, CV, Ventures
    • Repos              | -                    | -                   | CS, ML, DevOps, Cybersec
    • Personal           | -                    | -                   | Social, Music, Fitness, Travel
    • Tools              | -                    | -                   | Cloud Dash, Health, Markets, Maps
    • Circus             | -                    | -                   | Games, Music, Movies
                         |                      |                     |
  Features:              |                      |                     |
    • Dual carousel      | -                    | -                   | Professional/Personal toggle
    • Gallery/Lite mode  | -                    | -                   | Multiple display modes
    • Navigation         | -                    | -                   | Keyboard/gesture support
</code></pre>
<h3 id="user-ais-models">User AIs Models<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#user-ais-models" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<blockquote>
<p><strong>Detailed Spec:</strong> <code>0.spec/MASTERPLAN_AI.md</code> (separate infrastructure - performance-focused)
<strong>Status:</strong> Premium project (will merge when ready)</p>
</blockquote>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
ai-chat (Terminals)      | -                    | -                   | AI Chat Interface
  ↳ Mode 1: API Keys     | External APIs        | OpenAI/Claude/etc   | Connect external APIs
  ↳ Mode 2: Multi-Model  | Self-hosted          | → MASTERPLAN_AI.md  | Frontend for AI infrastructure
                         |                      |                     |
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
; MASTERPLAN_AI.md for more details:                                          |
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────

</code></pre>
<hr/>
<h2 id="a1-infra-services-kitchen">A1) Infra Services (KITCHEN)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a1-infra-services-kitchen" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="cloud-control-center-c3">Cloud Control Center (C3)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#cloud-control-center-c3" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
c3                       | -                    | -                   | Cloud Control Center (C3)
  ↳ c3-app               | Aggregator           | Python3             | Collectors + API
  ↳ c3-db0               | Storage              | Only JSON           | Config + metrics storage
</code></pre>
<h4 id="a10-front-user-view">A10) FRONT (User View)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a10-front-user-view" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
dashboard                | -                    | -                   | Main Dashboard &amp; Service Launcher
  ↳ dashboard-app        | Homepage             | Homepage            | Service cards + status + widgets
  ↳ dashboard-db0        | Storage              | YAML                | services.yaml, bookmarks.yaml
</code></pre>
<h4 id="a11-control-center-operations">A11) CONTROL CENTER (Operations)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a11-control-center-operations" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
monitor                  | -                    | -                   | Health Monitoring
  ↳ monitor-front        | Status Page          | Uptime Kuma (built-in)| Public status page + badges
  ↳ monitor-app          | Health Checks        | Uptime Kuma         | Ping, HTTP, TCP, DNS checks
  ↳ monitor-db0          | Database             | SQL:SQLite          | Incidents, heartbeats
                         |                      |                     |
orchestrate              | -                    | -                   | Container Orchestration
  ↳ orchestrate-app      | Stack Manager        | Dockge              | Docker Compose UI
  ↳ orchestrate-db0      | Storage              | Filesystem          | Stack configs (compose files)
                         |                      |                     |
workflows                | -                    | -                   | Workflow Automation Hub
  ↳ workflows-front      | Selector UI          | SvelteKit 5 + SCSS  | Hub landing + workflow selector
                         |                      |                     |
  ├─ temporal            | -                    | -                   | Infrastructure Workflows
  │    ↳ temporal-front  | Workflow UI          | Temporal UI (built-in)| Workflow dashboard
  │    ↳ temporal-app    | Workflow Engine      | Temporal            | Workflow engine
  │    ↳ temporal-db0    | Database             | SQL:PostgreSQL      | Workflow state, history
                         |                      |                     |
  └─ langgraph           | -                    | -                   | AI Agentic Workflows
       ↳ langgraph-front | Agent Monitor        | SvelteKit 5 + SCSS  | Agent monitor UI
       ↳ langgraph-app   | Agent Orchestrator   | LangGraph + FastAPI | Agent orchestration
       ↳ langgraph-db0   | Database             | SQL:PostgreSQL      | Checkpoints, chat history
       ↳ langgraph-vec   | Vector DB            | pgvector            | Vector embeddings
       ↳ langgraph-gpu   | GPU Runtime          | Vast.ai / Lambda    | GPU compute runtime
</code></pre>
<h4 id="a12-data--safety-security-layer">A12) DATA &amp; SAFETY (Security Layer)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a12-data--safety-security-layer" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
backup                   | -                    | -                   | Backup System
  ↳ backup-app           | Backup Engine        | Borgmatic           | Deduplicating backups (Borg wrapper)
  ↳ backup-db0           | Storage              | Filesystem          | Borg repos + borgmatic.yaml
                         |                      |                     |
security                 | -                    | -                   | Active Security (Vulnerability Scan)
  ↳ security-app         | Scanner              | Trivy               | Container image scanning
  ↳ security-cron        | Scheduler            | Cron                | Daily scans → JSON reports
</code></pre>
<h4 id="a13-audit-center">A13) AUDIT CENTER<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a13-audit-center" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
analytics                | -                    | -                   | Web Analytics Platform
  ↳ analytics-front      | Stats UI             | Matomo (built-in)   | Login + stats display
  ↳ analytics-app        | Analytics Engine     | Matomo (PHP-FPM)    | Analytics processing
  ↳ analytics-db0        | Database             | SQL:MariaDB         | Visits, events, reports
                         |                      |                     |
audit                    | -                    | -                   | Log Auditing (Passive Security)
  ↳ audit-app            | Log Viewer           | Dozzle              | Real-time container logs
</code></pre>
<h3 id="devs-security">Devs Security<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#devs-security" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
webserver                | -                    | -                   | Central Proxy &amp; Web Serving
  ↳ proxy-front          | Admin UI             | NPM (built-in)      | Login + NPM admin UI
  ↳ proxy-app            | Reverse Proxy        | NPM (Nginx Proxy Manager)| Reverse proxy + SSL termination
  ↳ proxy-db0            | Database             | SQL:SQLite          | Proxy configs + certs
                         |                      |                     |
oauth2                   | -                    | -                   | GitHub OAuth2 Authentication
  ↳ oauth2-front         | Login Page           | OAuth2-Proxy (built-in)| Login redirect page
  ↳ oauth2-app           | OAuth Server         | OAuth2-Proxy        | OAuth2 proxy server
  ↳ oauth2-db0           | Session Store        | Redis / Memory      | Session tokens
                         |                      |                     |
authelia                 | -                    | -                   | 2FA / SSO Gateway
  ↳ authelia-front       | Login UI             | Authelia (built-in) | Login + 2FA prompt
  ↳ authelia-app         | Auth Server          | Authelia            | Auth server + session mgmt
  ↳ authelia-db0         | Database             | SQL:PostgreSQL      | Users, sessions, TOTP seeds
                         |                      |                     |
vpn                      | -                    | -                   | VPN Server
  ↳ vpn-front            | Client UI            | wg-easy (built-in)  | Web UI for client management
  ↳ vpn-app              | VPN Server           | Wireguard           | VPN tunnel server
  ↳ vpn-db0              | Storage              | Filesystem          | Client configs + keys
</code></pre>
<h3 id="devs-infrastructure">Devs Infrastructure<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#devs-infrastructure" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Name                     | Component            | Stack               | Purpose
─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────
api                      | -                    | -                   | Central API Gateway
  ↳ api-front            | API Docs             | SvelteKit 5 + SCSS  | API docs / Swagger UI
  ↳ api-app              | API Server           | Python:Flask        | Flask API server
  ↳ api-db0              | Storage              | Hybrid:JSON/SQLite  | Aggregated JSONs from all apps
                         |                      |                     |
cache                    | -                    | -                   | In-Memory Cache
  ↳ cache-app            | Cache Server         | Redis               | Session/cache data store
</code></pre>
<h3 id="tech-definition">Tech Definition<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#tech-definition" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="devops-stack">DevOps Stack<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#devops-stack" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Category             | Provider                 | Purpose
─────────────────────┼──────────────────────────┼────────────────────────────────
Code Repository      | GitHub                   | Version control, collaboration
Database Host        | Oracle Cloud             | SQLite / MariaDB / PostgreSQL
CI/CD Pipeline       | GitHub Actions           | Build, test, deploy automation
Web Hosting          | GitHub Pages             | Static site hosting (free)
Analytics            | Matomo (self-hosted)     | Privacy-focused web analytics
DNS + CDN            | Cloudflare               | DNS, SSL, caching, DDoS protection
</code></pre>
<h4 id="security-stack">Security Stack<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#security-stack" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Component            | Stack                    | Purpose
─────────────────────┼──────────────────────────┼────────────────────────────────
Authelia             | Authelia + Redis         | 2FA Gateway, SSO, Session Mgmt
OAuth2 Providers     | OAuth2-Proxy             | Social Login Integration
  ↳ GitHub           | GitHub OAuth App         | Primary (dev-focused)
  ↳ Google           | Google OAuth             | Backup option
  ↳ Facebook         | Meta OAuth               | Future option
  ↳ X (Twitter)      | X OAuth                  | Future option
</code></pre>
<h4 id="webdevs-stack">WebDevs Stack<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#webdevs-stack" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Project Type         | Stack                    | Output                  | Render
─────────────────────┼──────────────────────────┼─────────────────────────┼────────────

## Frontend (Browser)
Static Landing       | Vanilla HTML + CSS       | Single .html file       | None (static)
Service Fronts       | SvelteKit 5 + SCSS       | HTML + minimal JS       | SSR + Hydration
Cloud Dashboard      | SvelteKit 5 + SCSS       | HTML + JS chunks        | SSR + CSR
GitHub Pages         | SvelteKit 5 (static)     | Pre-rendered HTML       | Static export

## Templating (Python Backend)
Project              | Stack              | Data Input     | Template         | Output
─────────────────────┼────────────────────┼────────────────┼──────────────────┼──────────────────
Email Notifications  | Jinja2 + Python    | JSON/dict      | .html.j2         | .html (email)
PDF Reports          | Jinja2 + WeasyPrint| JSON/dict      | .html.j2         | .pdf
Markdown Docs        | Jinja2 + Markdown  | JSON/dict      | .md.j2           | .md → .html
Config Files         | Jinja2             | JSON/dict      | .yaml.j2/.toml.j2| .yaml/.toml
Spec Docs (ArchSpecs)| Jinja2             | .spec.json     | .md.j2           | .md
</code></pre>
<hr/>
<h2 id="a2-infra-resources">A2) Infra Resources<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a2-infra-resources" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="a20-resource-allocation">A20) Resource Allocation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a20-resource-allocation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="a200-resource-estimation">A200) Resource Estimation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a200-resource-estimation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Service              | RAM      | Storage   | GPU    | Bandwidth/mo | VM
─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────

## FRIDGE

Terminals
↳ terminal-app       | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1
↳ ide-app            | 512 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1
↳ ai-app             | 512 MB   | 2 GB      | -      | 30 GB        | oci-p-flex_1

User Productivity
↳ mail-* (suite)     | 512 MB   | 10 GB     | -      | 5 GB         | oci-f-micro_1
↳ calendar-app       | 64 MB    | 500 MB    | -      | 1 GB         | oci-p-flex_1
↳ sync-front         | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1
  ↳ drive (Rclone)   | 128 MB   | 2 GB      | -      | 200 GB       | oci-p-flex_1
  ↳ git (Gitea)      | 256 MB   | 5 GB      | -      | 10 GB        | oci-p-flex_1
↳ photo-app          | 256 MB   | 20 GB     | -      | 50 GB        | oci-p-flex_1
↳ slides-app (Marp)  | 64 MB    | 200 MB    | -      | 2 GB         | oci-p-flex_1
  ↳ slidev (Sli.dev) | 128 MB   | 500 MB    | -      | 5 GB         | oci-p-flex_1
  ↳ reveal (Reveal.js)| 128 MB  | 500 MB    | -      | 5 GB         | oci-p-flex_1
↳ sheets-app         | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1
  ↳ pandas (Python)  | 256 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1
  ↳ xsv (Rust)       | 64 MB    | 1 GB      | -      | 10 GB        | oci-p-flex_1
↳ dashboards-app     | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1
  ↳ jupyter          | 512 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1
  ↳ dash (Plotly)    | 256 MB   | 1 GB      | -      | 10 GB        | oci-p-flex_1

User Security
↳ vault-app          | 128 MB   | 500 MB    | -      | 1 GB         | oci-p-flex_1
↳ vpn-app            | 64 MB    | 50 MB     | -      | 100 GB       | oci-p-flex_1

─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────
FRIDGE TOTALS        | 4.1 GB   | 49.6 GB   | -      | 483 GB       |

## KITCHEN

Cloud Control Center (C3)
↳ analytics-app      | 256 MB   | 5 GB      | -      | 100 GB       | oci-f-micro_2
↳ c3-app             | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1
  ↳ dashboard        | 64 MB    | 50 MB     | -      | 10 GB        | oci-p-flex_1
  ↳ monitor          | 64 MB    | 500 MB    | -      | 5 GB         | oci-p-flex_1
  ↳ orchestrate      | 128 MB   | 100 MB    | -      | 5 GB         | oci-p-flex_1
  ↳ backup           | 128 MB   | varies    | -      | 2 GB         | oci-p-flex_1
  ↳ audit            | 32 MB    | -         | -      | 2 GB         | oci-p-flex_1
  ↳ security         | 128 MB   | 1 GB      | -      | 2 GB         | oci-p-flex_1
↳ workflows-app      | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1
  ↳ temporal         | 512 MB   | 2 GB      | -      | 20 GB        | oci-p-flex_1
  ↳ langgraph        | 512 MB   | 2 GB      | -      | 30 GB        | oci-p-flex_1

Devs Security
↳ proxy-app          | 256 MB   | 1 GB      | -      | 50 GB        | gcp-f-micro_1
↳ authelia-app       | 128 MB   | 100 MB    | -      | 10 GB        | gcp-f-micro_1
↳ oauth2-app         | 64 MB    | 50 MB     | -      | 5 GB         | gcp-f-micro_1

Devs Infrastructure
↳ api-app            | 128 MB   | 1 GB      | -      | 20 GB        | gcp-f-micro_1
↳ cache-app          | 256 MB   | 1 GB      | -      | -            | oci-p-flex_1

─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────
KITCHEN TOTALS       | 2.4 GB   | 12.9 GB   | -      | 257 GB       |

═════════════════════╪══════════╪═══════════╪════════╪══════════════╪════════════════
GRAND TOTALS         | 6.5 GB   | 62.5 GB   | -      | 740 GB       |
</code></pre>
<h4 id="a201-vm-capacity--headroom">A201) VM Capacity &amp; Headroom<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a201-vm-capacity--headroom" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Host       | VM             | RAM    | Alloc  | HD     | Alloc  | Headroom | Services Running
───────────┼────────────────┼────────┼────────┼────────┼────────┼──────────┼─────────────────────────────────────────
GCloud     | gcp-f-micro_1  | 1 GB   | 576 MB | 30 GB  | 2.2 GB | 42% RAM  | proxy, authelia, oauth2, api, flask
Oracle     | oci-f-micro_1  | 1 GB   | 512 MB | 47 GB  | 10 GB  | 49% RAM  | mail-* (8 containers)
Oracle     | oci-f-micro_2  | 1 GB   | 256 MB | 47 GB  | 5 GB   | 74% RAM  | analytics
Oracle     | oci-p-flex_1   | 8 GB   | 5.1 GB | 100 GB | 45 GB  | 36% RAM  | sync, drive, git, photos, vault, vpn, cal, slides, sheets, dashboards, cloud-portal, workflows, cache
───────────┼────────────────┼────────┼────────┼────────┼────────┼──────────┼─────────────────────────────────────────
TOTALS     |                | 11 GB  | 6.4 GB | 224 GB | 62 GB  | 42% RAM  |
</code></pre>
<h4 id="a202-cost-estimation">A202) Cost Estimation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a202-cost-estimation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Item                   | Provider   | Monthly Cost  | Notes
───────────────────────┼────────────┼───────────────┼─────────────────────────────
gcp-f-micro_1          | GCloud     | $0            | Free Tier (e2-micro)
oci-f-micro_1          | Oracle     | $0            | Free Tier (Always Free)
oci-f-micro_2          | Oracle     | $0            | Free Tier (Always Free)
oci-p-flex_1           | Oracle     | ~$5.50        | Flex (wake-on-demand)
Cloudflare             | Cloudflare | $0            | Free Plan (DNS + CDN)
Domain (annual/12)     | Cloudflare | ~$1           | ~$10/year
───────────────────────┼────────────┼───────────────┼─────────────────────────────
TOTAL                  |            | ~$6.50/mo     | Cloud infrastructure
</code></pre>
<h4 id="a203-urlport-proxied">A203) URL/Port Proxied<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a203-urlport-proxied" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p><strong>URL Pattern:</strong> <code>service.diegonmarcos.com</code> = Login/Landing → redirects to <code>/app</code> after auth success</p>
<p><strong>Services:</strong></p>
<pre><code>Service           | URL (Public and Private AUTH)                   | VM             | Container        | Private | IP:Port
──────────────────┼─────────────────────────────────────────────────┼────────────────┼──────────────────┼─────────┼─────────────────────
## FRIDGE

Terminals
↳ Terminals Hub   | terminal.diegonmarcos.com                       | oci-p-flex_1   | terminals-front  | -       | 84.235.234.87:3000
  ↳ WebTerminal   | terminal.diegonmarcos.com/terminal              | oci-p-flex_1   | terminal-app     | x       | 84.235.234.87:7681
  ↳ IDE           | terminal.diegonmarcos.com/ide                   | oci-p-flex_1   | ide-app          | x       | 84.235.234.87:8080
  ↳ AI Chat       | terminal.diegonmarcos.com/chat                  | oci-p-flex_1   | ai-app           | x       | 84.235.234.87:8501

User Productivity
↳ Mail            | mail.diegonmarcos.com                           | oci-f-micro_1  | mail-front       | -       | 130.110.251.193:443
  ↳ Webmail       | mail.diegonmarcos.com/webmail                   | oci-f-micro_1  | mail-webmail     | x       | 130.110.251.193:443
↳ Calendar        | cal.diegonmarcos.com                            | oci-p-flex_1   | calendar-front   | -       | 84.235.234.87:5232
  ↳ Radicale      | cal.diegonmarcos.com/radicale                   | oci-p-flex_1   | calendar-app     | x       | 84.235.234.87:5232
↳ Sync            | sync.diegonmarcos.com                           | oci-p-flex_1   | sync-front       | -       | 84.235.234.87:8384
  ↳ Drive         | sync.diegonmarcos.com/drive                     | oci-p-flex_1   | drive-app        | x       | 84.235.234.87:5572
  ↳ Git           | sync.diegonmarcos.com/git                       | oci-p-flex_1   | git-app          | x       | 84.235.234.87:3001
↳ Photos          | photos.diegonmarcos.com                         | oci-p-flex_1   | photo-front      | -       | 84.235.234.87:2342
  ↳ Photoprism    | photos.diegonmarcos.com/photoprism              | oci-p-flex_1   | photo-app        | x       | 84.235.234.87:2342
↳ Slides          | slides.diegonmarcos.com                         | oci-p-flex_1   | slides-front     | -       | 84.235.234.87:3002
  ↳ Slidev        | slides.diegonmarcos.com/slidev                  | oci-p-flex_1   | slidev-app       | x       | 84.235.234.87:3030
  ↳ Reveal        | slides.diegonmarcos.com/reveal                  | oci-p-flex_1   | reveal-app       | x       | 84.235.234.87:3031
↳ Sheets          | sheets.diegonmarcos.com                         | oci-p-flex_1   | sheets-front     | -       | 84.235.234.87:3003
  ↳ Pandas        | sheets.diegonmarcos.com/pandas                  | oci-p-flex_1   | pandas-app       | x       | 84.235.234.87:8502
  ↳ XSV           | sheets.diegonmarcos.com/xsv                     | oci-p-flex_1   | xsv-app          | x       | 84.235.234.87:8503
↳ Dashboards      | dashboards.diegonmarcos.com                     | oci-p-flex_1   | dashboards-front | -       | 84.235.234.87:3004
  ↳ Jupyter       | dashboards.diegonmarcos.com/jupyter             | oci-p-flex_1   | jupyter-app      | x       | 84.235.234.87:8888
  ↳ Dash          | dashboards.diegonmarcos.com/dash                | oci-p-flex_1   | dash-app         | x       | 84.235.234.87:8050

User Security
↳ Vault           | vault.diegonmarcos.com                          | oci-p-flex_1   | vault-front      | -       | 84.235.234.87:8080
  ↳ Vaultwarden   | vault.diegonmarcos.com/vaultwarden              | oci-p-flex_1   | vault-app        | x       | 84.235.234.87:8080
↳ VPN             | vpn.diegonmarcos.com                            | oci-p-flex_1   | vpn-front        | -       | 84.235.234.87:51821
  ↳ WG-Easy       | vpn.diegonmarcos.com/wg-easy                    | oci-p-flex_1   | vpn-app          | x       | 84.235.234.87:51820

## KITCHEN

Cloud Control Center (C3)
↳ Analytics       | analytics.diegonmarcos.com                      | oci-f-micro_2  | analytics-front  | -       | 129.151.228.66:8080
  ↳ Matomo        | analytics.diegonmarcos.com/matomo               | oci-f-micro_2  | analytics-app    | x       | 129.151.228.66:8080
↳ Dashboard       | cloud.diegonmarcos.com                          | oci-p-flex_1   | dashboard-app    | -       | 84.235.234.87:3000
  ↳ Homepage      | cloud.diegonmarcos.com                          | oci-p-flex_1   | homepage         | -       | 84.235.234.87:3000
↳ Monitor         | status.diegonmarcos.com                         | oci-p-flex_1   | monitor-app      | -       | 84.235.234.87:3001
  ↳ Uptime Kuma   | status.diegonmarcos.com                         | oci-p-flex_1   | uptime-kuma      | x       | 84.235.234.87:3001
↳ Orchestrate     | dockge.diegonmarcos.com                         | oci-p-flex_1   | orchestrate-app  | x       | 84.235.234.87:5001
  ↳ Dockge        | dockge.diegonmarcos.com                         | oci-p-flex_1   | dockge           | x       | 84.235.234.87:5001
↳ Audit           | logs.diegonmarcos.com                           | oci-p-flex_1   | audit-app        | x       | 84.235.234.87:9999
  ↳ Dozzle        | logs.diegonmarcos.com                           | oci-p-flex_1   | dozzle           | x       | 84.235.234.87:9999
↳ Workflows       | workflow.diegonmarcos.com                       | oci-p-flex_1   | workflows-front  | -       | 84.235.234.87:3006
  ↳ Temporal      | workflow.diegonmarcos.com/temporal              | oci-p-flex_1   | temporal-app     | x       | 84.235.234.87:8233
  ↳ LangGraph     | workflow.diegonmarcos.com/langgraph             | oci-p-flex_1   | langgraph-app    | x       | 84.235.234.87:8123

Devs Security
↳ Proxy Admin     | proxy.diegonmarcos.com                          | gcp-f-micro_1  | proxy-front      | -       | 34.55.55.234:81
  ↳ NPM           | proxy.diegonmarcos.com/npm                      | gcp-f-micro_1  | proxy-app        | x       | 34.55.55.234:81
↳ Auth (Authelia) | auth.diegonmarcos.com                           | gcp-f-micro_1  | authelia-front   | -       | 34.55.55.234:9091
  ↳ Authelia      | auth.diegonmarcos.com/authelia                  | gcp-f-micro_1  | authelia-app     | -       | 34.55.55.234:9091
↳ OAuth2          | auth.diegonmarcos.com/oauth2                    | gcp-f-micro_1  | oauth2-app       | -       | 34.55.55.234:4180

Devs Infrastructure
↳ API Gateway     | api.diegonmarcos.com                            | oci-p-flex_1   | api-front        | -       | 84.235.234.87:5000
  ↳ Docs          | api.diegonmarcos.com/docs                       | oci-p-flex_1   | api-app          | x       | 84.235.234.87:5000
↳ Cache           | (internal)                                      | oci-p-flex_1   | cache-app        | -       | 84.235.234.87:6379
</code></pre>
<p><strong>VMs:</strong></p>
<pre><code>Host       | VM Name        | IP              | Host SSH                                      | VM SSH
───────────┼────────────────┼─────────────────┼───────────────────────────────────────────────┼──────────────────────────────
GCloud     | gcp-f-micro_1  | 34.55.55.234    | gcloud compute ssh arch-1 --zone=us-central1-a | -
Oracle     | oci-f-micro_1  | 130.110.251.193 | -                                             | ssh ubuntu@130.110.251.193
Oracle     | oci-f-micro_2  | 129.151.228.66  | -                                             | ssh ubuntu@129.151.228.66
Oracle     | oci-p-flex_1   | 84.235.234.87   | -                                             | ssh ubuntu@84.235.234.87
</code></pre>
<h3 id="a21-maps--topology">A21) Maps &amp; Topology<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a21-maps--topology" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="network-topology">Network Topology<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#network-topology" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>                                    INTERNET
                                       │
                                       ▼
                          ┌────────────────────────┐
                          │      CLOUDFLARE        │
                          │   DNS + CDN + Proxy    │
                          │   diegonmarcos.com     │
                          └───────────┬────────────┘
                                      │
                    ┌─────────────────┼─────────────────┐
                    │                 │                 │
                    ▼                 ▼                 ▼
┌───────────────────────────────────────────────────────────────────────────────┐
│                              GOOGLE CLOUD                                      │
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │  gcp-f-micro_1 (us-central1-a)              34.55.55.234                │  │
│  │  e2-micro | 1 GB RAM | 30 GB | FREE 24/7                                │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐          │  │
│  │  │  NPM :80/:443   │  │ Authelia :9091  │  │  Flask API      │          │  │
│  │  │  Reverse Proxy  │  │  2FA Gateway    │  │  :5000          │          │  │
│  │  └────────┬────────┘  └────────┬────────┘  └─────────────────┘          │  │
│  │           │                    │                                         │  │
│  │           └────────────────────┘                                         │  │
│  │                    │ Forward Auth                                        │  │
│  └────────────────────┼─────────────────────────────────────────────────────┘  │
└───────────────────────┼────────────────────────────────────────────────────────┘
                        │
        ┌───────────────┼───────────────┬───────────────┐
        │               │               │               │
        ▼               ▼               ▼               ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                 ORACLE CLOUD                                     │
│                                                                                  │
│  ┌────────────────────────┐  ┌────────────────────────┐                         │
│  │  oci-f-micro_1         │  │  oci-f-micro_2         │                         │
│  │  130.110.251.193       │  │  129.151.228.66        │                         │
│  │  1 GB | 47 GB          │  │  1 GB | 47 GB          │                         │
│  │  FREE 24/7             │  │  FREE 24/7             │                         │
│  │  ─────────────────     │  │  ─────────────────     │                         │
│  │  • mail-* (8 cont)     │  │  • analytics (Matomo)  │                         │
│  │    - IMAP/SMTP         │  │    - PHP-FPM           │                         │
│  │    - Webmail           │  │    - MariaDB           │                         │
│  │    - Admin             │  │                        │                         │
│  └────────────────────────┘  └────────────────────────┘                         │
│                                                                                  │
│  ┌──────────────────────────────────────────────────────────────────────────┐   │
│  │  oci-p-flex_1 (eu-frankfurt-1)                      84.235.234.87        │   │
│  │  A1.Flex | 8 GB RAM | 100 GB | PAID (wake-on-demand) ~$5.50/mo           │   │
│  │  ────────────────────────────────────────────────────────────────────    │   │
│  │  FRIDGE (Solutions)                  │  KITCHEN (C3 Control Center)      │   │
│  │  • terminal, ide, ai-chat            │  • 01 Homepage (dashboard)        │   │
│  │  • sync, drive (Rclone), git (Gitea) │  • 10 Uptime Kuma (monitor)       │   │
│  │  • photos (Photoprism), calendar     │  • 11 Dockge (orchestrate)        │   │
│  │  • slides (Marp/Slidev/Reveal)       │  • 20 Borgmatic (backup)          │   │
│  │  • sheets (Pandas/XSV)               │  • 21 Dozzle (audit)              │   │
│  │  • dashboards (Jupyter/Dash)         │  • 22 Trivy (security)            │   │
│  │  • vault (Vaultwarden), vpn (WG)     │  • cache (Redis)                  │   │
│  └──────────────────────────────────────────────────────────────────────────┘   │
│                                                                                  │
└──────────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h4 id="auth-flow">Auth Flow<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#auth-flow" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>User Request → Cloudflare → NPM (gcp-f-micro_1)
                              │
                              ▼
                      ┌───────────────┐
                      │   Authelia    │
                      │   2FA Check   │
                      └───────┬───────┘
                              │
            ┌─────────────────┼─────────────────┐
            ▼                 ▼                 ▼
      ┌──────────┐      ┌──────────┐      ┌──────────┐
      │  GitHub  │      │   TOTP   │      │ Passkey  │
      │  OAuth2  │      │  (Local) │      │ WebAuthn │
      └────┬─────┘      └────┬─────┘      └────┬─────┘
           └─────────────────┼─────────────────┘
                             ▼
                   Session Cookie Created
                   (.diegonmarcos.com)
                             │
                             ▼
                   Access Granted → Backend VM
</code></pre>
<h3 id="a22-costs">A22) Costs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a22-costs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│  MONTHLY COSTS                                                   │
├─────────────────────────────────────────────────────────────────┤
│  GCloud gcp-f-micro_1      │  FREE        │  24/7 gateway       │
│  Oracle oci-f-micro_1      │  FREE        │  24/7 mail          │
│  Oracle oci-f-micro_2      │  FREE        │  24/7 analytics     │
│  Oracle oci-p-flex_1       │  ~$5.50      │  wake-on-demand     │
│  Cloudflare                │  FREE        │  DNS + CDN          │
│  Domain                    │  ~$1         │  annual/12          │
├─────────────────────────────────────────────────────────────────┤
│  TOTAL CLOUD               │  ~$6.50/mo   │                     │
└─────────────────────────────────────────────────────────────────┘
</code></pre>
<hr/>
<h2 id="a3-tech-research">A3) Tech Research<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a3-tech-research" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h4 id="framework-comparison-frontend">Framework Comparison (Frontend)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#framework-comparison-frontend" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Criteria        | Vanilla (HTML+CSS+JS)    | Vue3 + Nuxt3 (SSR)       | SvelteKit 5 (SSR)
────────────────┼──────────────────────────┼──────────────────────────┼──────────────────────────
SEO             | ★★★★★ Excellent          | ★★★★★ Excellent (SSR)    | ★★★★★ Excellent (SSR)
Performance     | ★★★★★ Best (no overhead) | ★★★★☆ Good (Vue runtime) | ★★★★★ Excellent (compiles)
Complexity      | ★☆☆☆☆ Hard at scale      | ★★★☆☆ Medium             | ★★★★☆ Low-Medium
Consistency     | ★☆☆☆☆ No patterns        | ★★★★☆ Good (SFC)         | ★★★★★ Opinionated
Bundle Size     | 0 KB (no framework)      | ~50 KB (Vue runtime)     | ~5 KB (compiles away)
Learning Curve  | Low (basics)             | Medium-High              | Low-Medium
SSR Support     | Manual only              | Built-in (Nuxt3)         | Built-in
Static Export   | Native                   | Built-in (Nuxt3)         | Built-in
</code></pre>
<h4 id="framework-comparison-templating---pythonjs-backend">Framework Comparison (Templating - Python/JS Backend)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#framework-comparison-templating---pythonjs-backend" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Criteria        | Jinja2 (Python)          | Mako (Python)            | Handlebars (JS)
────────────────┼──────────────────────────┼──────────────────────────┼──────────────────────────
Performance     | ★★★★☆ Fast               | ★★★★★ Fastest            | ★★★★☆ Fast
Syntax          | ★★★★★ Clean {{ }}        | ★★★☆☆ ${} + Python       | ★★★★☆ Clean {{ }}
Logic Support   | ★★★★★ Full (loops, if)   | ★★★★★ Full + Python      | ★★☆☆☆ Logic-less
Learning Curve  | ★★★★★ Easy               | ★★★☆☆ Medium             | ★★★★★ Easy
Ecosystem       | ★★★★★ Flask, Ansible     | ★★★☆☆ SQLAlchemy         | ★★★★☆ Node.js, Mustache
Inheritance     | ★★★★★ Extends + Blocks   | ★★★★★ Extends + Blocks   | ★★★☆☆ Partials only
Debug           | ★★★★★ Clear errors       | ★★★☆☆ Verbose            | ★★★★☆ Good
</code></pre>
<h4 id="when-to-use">When to Use<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#when-to-use" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<pre><code>Use Case             | Best Choice              | Why
─────────────────────┼──────────────────────────┼────────────────────────────────────────

## Static / SEO Pages (minimal JS, SEO-first, some dynamic)
 - Landing pages        | Vanilla or SvelteKit     | SEO matters, minimal JS needed
 - Login/Auth pages     | Vanilla                  | Simple forms, no framework needed
 - Dashboards           | SvelteKit                | Reactive data, SSR for initial load

## Documentation (Markdown → HTML, Obsidian-like workflow)
 - Docs / Knowledge Base| SvelteKit (static)       | Markdown support, fast builds
 - API Docs             | SvelteKit + OpenAPI      | Auto-generated from specs

## Web Apps (interactive, component-based)
 - Data Apps            | SvelteKit or Nuxt3       | Forms, lists, CRUD operations
 - Media Apps           | SvelteKit or Nuxt3       | Maps, music, photos, video players
 - Games                | Vanilla + Phaser/Three.js| Direct Canvas/WebGL, no overhead

## MVPs / Prototypes (fast iteration, throwaway code)
 - Quick prototypes     | Vue3 + Vite              | Fast HMR, familiar syntax
 - Hackathons           | Vue3 + Vite              | Speed over architecture

## Server-Side Templating (Python backend, no JS)
 - Email templates      | Jinja2                   | Dynamic emails from Python
 - PDF/HTML reports     | Jinja2                   | Generate from data + template
 - Config generation    | Jinja2                   | YAML/JSON/TOML from templates
 - Batch HTML pages     | Jinja2                   | Bulk generate static pages
 - Flask views          | Jinja2                   | Server-rendered HTML (no SPA)
</code></pre>
<hr/>
<h2 id="a4-today-current-state">A4) Today (Current State)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#a4-today-current-state" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="by-service">by Service<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#by-service" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Service           | Public URL                      | VM             | Container       | IP:Port             | Status
──────────────────┼─────────────────────────────────┼────────────────┼─────────────────┼─────────────────────┼────────

## FRIDGE

Terminals
↳ WebTerminal     | terminal.diegonmarcos.com       | oci-p-flex_1   | terminal-app    | 84.235.234.87:7681  | dev

User Productivity
↳ Mail            | mail.diegonmarcos.com           | oci-f-micro_1  | mailu-front     | 130.110.251.193:443 | on
↳ Sync            | sync.diegonmarcos.com           | oci-p-flex_1   | sync-app        | 84.235.234.87:8384  | on
↳ Git             | git.diegonmarcos.com            | oci-p-flex_1   | git-app         | 84.235.234.87:3000  | dev
↳ Photos          | photos.diegonmarcos.com         | oci-p-flex_1   | photoprism-app  | 84.235.234.87:2342  | on
↳ Calendar        | cal.diegonmarcos.com            | oci-p-flex_1   | radicale-app    | 84.235.234.87:5232  | on

User Security
↳ Vault           | vault.diegonmarcos.com          | oci-p-flex_1   | vault-app       | 84.235.234.87:80    | dev
↳ VPN (OpenVPN)   | (UDP direct)                    | oci-p-flex_1   | vpn-app         | 84.235.234.87:1194  | dev

## KITCHEN

Cloud Control Center (C3)
↳ Analytics       | analytics.diegonmarcos.com      | oci-f-micro_2  | matomo-app      | 129.151.228.66:8080 | on
↳ Cloud Dashboard | cloud.diegonmarcos.com          | squarespace    | (external)      | 198.49.23.144       | on
↳ Flask API       | (internal)                      | gcp-f-micro_1  | flask-app       | 34.55.55.234:5000   | on
↳ n8n Infra       | n8n.diegonmarcos.com            | oci-p-flex_1   | n8n-infra-app   | 84.235.234.87:5678  | on

Devs Security
↳ Proxy Admin     | proxy.diegonmarcos.com          | gcp-f-micro_1  | npm-gcloud      | 34.55.55.234:81     | on
↳ Auth (Authelia) | auth.diegonmarcos.com           | gcp-f-micro_1  | authelia-app    | 34.55.55.234:9091   | on
↳ Authelia Redis  | (internal)                      | gcp-f-micro_1  | authelia-redis  | 34.55.55.234:6379   | on

Devs Infrastructure
↳ Cache           | (internal)                      | oci-p-flex_1   | cache-app       | 84.235.234.87:6379  | on
</code></pre>
<h3 id="by-vm">by VM<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#by-vm" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Host   | VM             | RAM   | VRAM | Storage | IP              | Services Running                          | Notes
───────┼────────────────┼───────┼──────┼─────────┼─────────────────┼───────────────────────────────────────────┼─────────────────
GCloud | gcp-f-micro_1  | 1 GB  | -    | 30 GB   | 34.55.55.234    | npm, authelia, redis, flask-app           | 24/7 FREE
Oracle | oci-f-micro_1  | 1 GB  | -    | 47 GB   | 130.110.251.193 | mailu-* (8 containers)                    | 24/7 FREE
Oracle | oci-f-micro_2  | 1 GB  | -    | 47 GB   | 129.151.228.66  | matomo-app, matomo-db                     | 24/7 FREE
Oracle | oci-p-flex_1   | 8 GB  | -    | 100 GB  | 84.235.234.87   | sync, photos, n8n, git, cal, cache...     | WAKE $5.5/mo
</code></pre>
<hr/>
<hr/>
<hr/>
<hr/>
<h1 id="b-architecture---technical-deep-dives">B) Architecture - Technical Deep Dives<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b-architecture---technical-deep-dives" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="b1-security-architecture">B1) Security Architecture<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b1-security-architecture" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="b11-web-auth---dual-authentication">B11) Web Auth - Dual Authentication<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b11-web-auth---dual-authentication" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Plan:</strong> <code>0.spec/Task_Security2faOAuth20/PLAN_DualAuth_Security.md</code></p>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                         DUAL AUTH FLOW                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  User Request → NPM → auth_request → Authelia                   │
│                                          │                      │
│                          ┌───────────────┼───────────────┐      │
│                          │               │               │      │
│                          ▼               ▼               ▼      │
│                    ┌──────────┐   ┌──────────┐   ┌──────────┐  │
│                    │  GitHub  │   │   TOTP   │   │ Passkey  │  │
│                    │  OAuth2  │   │  (Local) │   │ (WebAuthn)│  │
│                    └────┬─────┘   └────┬─────┘   └────┬─────┘  │
│                         │              │              │         │
│                         └──────────────┴──────────────┘         │
│                                        │                        │
│                                        ▼                        │
│                              Session Cookie Created             │
│                              (.diegonmarcos.com)                │
│                                        │                        │
│                                        ▼                        │
│                              Access Granted to Service          │
└─────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Authentication Paths (Either grants access):</strong></p>
<ul>
<li><strong>Path 1:</strong> GitHub OAuth2 - Passwordless, uses GitHub’s 2FA</li>
<li><strong>Path 2:</strong> Local TOTP - Authelia internal user + TOTP app</li>
<li><strong>Path 3:</strong> Passkey/WebAuthn - Hardware key or biometric</li>
</ul>
<p><strong>Key Components:</strong></p>
<ul>
<li>Authelia on GCP VM (central gateway)</li>
<li>NPM forward auth for all services</li>
<li>SSO via session cookie (domain: <code>.diegonmarcos.com</code>)</li>
</ul>
<hr/>
<h3 id="b12-dev-access---ssh--vault-management">B12) Dev Access - SSH &amp; Vault Management<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b12-dev-access---ssh--vault-management" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Secrets Storage Tiers:</strong></p>





























<div class="table-container"><table><thead><tr><th>Tier</th><th>Location</th><th>Purpose</th><th>Access Method</th></tr></thead><tbody><tr><td><strong>LOCAL_KEYS</strong></td><td><code>/home/diego/Documents/Git/LOCAL_KEYS/</code></td><td>SSH keys, API tokens, infra creds</td><td>Terminal/CLI</td></tr><tr><td><strong>Bitwarden</strong></td><td>Cloud (bitwarden.com)</td><td>Browser passwords, TOTP seeds</td><td>Browser extension</td></tr><tr><td><strong>Vaultwarden</strong></td><td>vault.diegonmarcos.com</td><td>Full backup, privacy-sensitive</td><td>Self-hosted web</td></tr></tbody></table></div>
<p><strong>SSH Access Configuration:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># LOCAL_KEYS structure</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LOCAL_KEYS/</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 00_terminal/</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh/</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> id_rsa</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Default key</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       ├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcp_arch1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # GCloud VM</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">│</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       └──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oci_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # Oracle VMs</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> README.md</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   # All credentials reference</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Symlinked to ~/.ssh/</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/.ssh/ → LOCAL_KEYS/00_terminal/ssh/</span></span></code></pre></figure>
<p><strong>VM Access Commands:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GCP (NPM + Authelia)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gcloud</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> arch-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --zone=us-central1-a</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Oracle VMs</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu@130.110.251.193</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Mail</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu@129.151.228.66</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # Analytics</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ubuntu@84.235.234.87</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Dev (p-flex)</span></span></code></pre></figure>
<p><strong>Vault Workflow:</strong></p>
<ol>
<li><strong>Daily use:</strong> Bitwarden Cloud (browser extension)</li>
<li><strong>Sensitive items:</strong> Vaultwarden (self-hosted, Authelia protected)</li>
<li><strong>Infra credentials:</strong> LOCAL_KEYS/README.md (terminal reference)</li>
</ol>
<hr/>
<h3 id="b13-isolation---network-segmentation--hardening">B13) Isolation - Network Segmentation &amp; Hardening<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b13-isolation---network-segmentation--hardening" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Defense Layers:</strong></p>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                      SECURITY LAYERS                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  LAYER 1: Network Edge                                          │
│  ├── Cloudflare Proxy (DDoS, WAF)                              │
│  └── UFW Firewall (allow only 80, 443, 22)                     │
│                                                                 │
│  LAYER 2: Reverse Proxy                                         │
│  ├── NGINX Security Headers                                     │
│  │   ├── X-Frame-Options: DENY                                 │
│  │   ├── X-Content-Type-Options: nosniff                       │
│  │   ├── Content-Security-Policy                               │
│  │   └── Strict-Transport-Security                             │
│  └── NPM Forward Auth → Authelia                               │
│                                                                 │
│  LAYER 3: Network Isolation                                     │
│  ├── Wireguard VPN (inter-VM traffic)                          │
│  ├── Docker Network (bridge isolation)                         │
│  └── No exposed ports (internal only)                          │
│                                                                 │
│  LAYER 4: Container Security                                    │
│  ├── Docker Compose: no &quot;ports:&quot; (use networks)                │
│  ├── Read-only containers where possible                       │
│  └── Non-root user in containers                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>UFW Rules (per VM):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Default deny</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> incoming</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> outgoing</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Allow SSH (restrict to known IPs if possible)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 22/tcp</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Allow HTTP/HTTPS (only on proxy VM)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 80/tcp</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 443/tcp</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Wireguard (inter-VM)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 51820/udp</span></span></code></pre></figure>
<p><strong>Docker Compose Pattern (no exposed ports):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="yaml" data-theme="github-light github-dark"><code data-language="yaml" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SECURE: Internal network only</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # NO &quot;ports:&quot; section - accessed via reverse proxy</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  internal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span></code></pre></figure>
<p><strong>NGINX Security Headers:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="nginx" data-theme="github-light github-dark"><code data-language="nginx" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add to NPM Advanced config</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Frame-Options </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SAMEORIGIN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Content-Type-Options </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nosniff&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-XSS-Protection </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1; mode=block&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Referrer-Policy </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;strict-origin-when-cross-origin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Permissions-Policy </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;geolocation=(), microphone=(), camera=()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> always;</span></span></code></pre></figure>
<hr/>
<h2 id="b2-service-architecture">B2) Service Architecture<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b2-service-architecture" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="b21-containers---docker-compose-patterns">B21) Containers - Docker Compose Patterns<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b21-containers---docker-compose-patterns" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Standard Service Pattern:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="yaml" data-theme="github-light github-dark"><code data-language="yaml" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pattern: service-name/docker-compose.yml</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.8&quot;</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${SERVICE_IMAGE}</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${SERVICE_NAME}-app</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">proxy</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data:/data</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=Europe/Berlin</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.centurylinklabs.watchtower.enable=true&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  internal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    external</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">npm_network</span></span></code></pre></figure>
<p><strong>Multi-Container Service Pattern:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="yaml" data-theme="github-light github-dark"><code data-language="yaml" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pattern: service with frontend + backend + database</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  front</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./frontend</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${APP_IMAGE}</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DATABASE_URL=postgresql://db:5432/${DB_NAME}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres:15-alpine</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db_data:/var/lib/postgresql/data</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></figure>
<hr/>
<h3 id="b22-databases---schemas--migrations">B22) Databases - Schemas &amp; Migrations<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b22-databases---schemas--migrations" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Database Distribution:</strong></p>















































<div class="table-container"><table><thead><tr><th>Service</th><th>Database</th><th>Location</th><th>Backup Strategy</th></tr></thead><tbody><tr><td>mail-*</td><td>Maildir</td><td>oci-f-micro_1</td><td>Syncthing → local</td></tr><tr><td>analytics</td><td>MariaDB</td><td>oci-f-micro_2</td><td>Daily SQL dump</td></tr><tr><td>authelia</td><td>PostgreSQL</td><td>gcp-f-micro_1</td><td>Persistent volume</td></tr><tr><td>git</td><td>SQLite</td><td>oci-p-flex_1</td><td>File backup</td></tr><tr><td>photos</td><td>SQLite</td><td>oci-p-flex_1</td><td>File backup</td></tr><tr><td>workflows</td><td>PostgreSQL</td><td>oci-p-flex_1</td><td>Daily SQL dump</td></tr></tbody></table></div>
<p><strong>Migration Strategy:</strong></p>
<ol>
<li>Schema changes via numbered migration files</li>
<li>Backup before migration</li>
<li>Test in dev environment first</li>
<li>Rollback plan documented</li>
</ol>
<hr/>
<h3 id="b23-apis---contracts--versioning">B23) APIs - Contracts &amp; Versioning<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b23-apis---contracts--versioning" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>API Standards:</strong></p>





























<div class="table-container"><table><thead><tr><th>Aspect</th><th>Standard</th></tr></thead><tbody><tr><td>Format</td><td>REST + JSON</td></tr><tr><td>Auth</td><td>Bearer token (from Authelia session)</td></tr><tr><td>Versioning</td><td>URL prefix <code>/api/v1/</code></td></tr><tr><td>Docs</td><td>OpenAPI 3.0 spec</td></tr><tr><td>Errors</td><td>RFC 7807 Problem Details</td></tr></tbody></table></div>
<p><strong>Central API Gateway (api.diegonmarcos.com):</strong></p>
<pre><code>/api/v1/
├── /services      # Service catalog
├── /metrics       # Monitoring data
├── /health        # Health checks
└── /auth          # Auth status
</code></pre>
<hr/>
<h2 id="b3-infrastructure-architecture">B3) Infrastructure Architecture<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b3-infrastructure-architecture" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="b31-networking---dns-ssl-reverse-proxy">B31) Networking - DNS, SSL, Reverse Proxy<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b31-networking---dns-ssl-reverse-proxy" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>DNS Configuration (Cloudflare):</strong></p>





























<div class="table-container"><table><thead><tr><th>Record</th><th>Type</th><th>Target</th><th>Proxy</th></tr></thead><tbody><tr><td>@</td><td>A</td><td>34.55.55.234</td><td>Yes</td></tr><tr><td>*</td><td>CNAME</td><td>@</td><td>Yes</td></tr><tr><td>mail</td><td>A</td><td>130.110.251.193</td><td>No (direct)</td></tr></tbody></table></div>
<p><strong>SSL Strategy:</strong></p>
<ul>
<li>Cloudflare Origin certificates (15 years)</li>
<li>NPM manages Let’s Encrypt for non-proxied</li>
<li>Force HTTPS everywhere</li>
</ul>
<p><strong>Reverse Proxy Rules (NPM):</strong></p>
<pre><code>*.diegonmarcos.com → NPM (34.55.55.234)
  ├── Forward Auth → Authelia (9091)
  └── Proxy to backend VM:port
</code></pre>
<hr/>
<h3 id="b32-storage---volumes--backups">B32) Storage - Volumes &amp; Backups<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b32-storage---volumes--backups" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Volume Strategy:</strong></p>






























<div class="table-container"><table><thead><tr><th>Type</th><th>Mount</th><th>Backup</th></tr></thead><tbody><tr><td>Config</td><td><code>./config:/config</code></td><td>Git repo</td></tr><tr><td>Data</td><td><code>./data:/data</code></td><td>Syncthing</td></tr><tr><td>Database</td><td>Named volume</td><td>SQL dump</td></tr><tr><td>Logs</td><td><code>/var/log</code></td><td>Rotate + archive</td></tr></tbody></table></div>
<p><strong>Backup Schedule:</strong></p>



































<div class="table-container"><table><thead><tr><th>Target</th><th>Frequency</th><th>Retention</th><th>Method</th></tr></thead><tbody><tr><td>Configs</td><td>On change</td><td>Forever</td><td>Git push</td></tr><tr><td>User data</td><td>Real-time</td><td>30 days</td><td>Syncthing</td></tr><tr><td>Databases</td><td>Daily 3AM</td><td>7 days</td><td>pg_dump/mysqldump</td></tr><tr><td>Full VM</td><td>Weekly</td><td>4 weeks</td><td>Cloud snapshot</td></tr></tbody></table></div>
<hr/>
<h3 id="b33-scaling---wake-on-demand--gpu">B33) Scaling - Wake-on-Demand &amp; GPU<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#b33-scaling---wake-on-demand--gpu" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Wake-on-Demand (oci-p-flex_1):</strong></p>
<pre><code>Request → NPM → Check if VM running
                    │
        ┌───────────┴───────────┐
        │ Running               │ Stopped
        ▼                       ▼
   Forward to VM          Wake VM via OCI API
                               │
                          Wait for ready
                               │
                          Forward request
</code></pre>
<p><strong>GPU Provisioning (TensorDock/Vast.ai):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># On-demand GPU workflow</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Request</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workload</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Provision</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cheapest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> available</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> model/data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloud</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> storage</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> workload</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">5.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> results</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloud</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> storage</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">6.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Terminate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GPU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VM</span></span></code></pre></figure>
<hr/>
<h1 id="c-roadmap---planning--prioritization">C) Roadmap - Planning &amp; Prioritization<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c-roadmap---planning--prioritization" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="c1-phases---implementation-milestones">C1) Phases - Implementation Milestones<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c1-phases---implementation-milestones" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="phase-1-security-foundation-priority">Phase 1: Security Foundation (PRIORITY)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-1-security-foundation-priority" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> In Progress
<strong>Dependencies:</strong> None</p>



































<div class="table-container"><table><thead><tr><th>Step</th><th>Task</th><th>Status</th></tr></thead><tbody><tr><td>1.1</td><td>Deploy Authelia on GCP VM</td><td>Done</td></tr><tr><td>1.2</td><td>Configure GitHub OAuth App</td><td>Done</td></tr><tr><td>1.3</td><td>Setup NPM forward auth</td><td>Done</td></tr><tr><td>1.4</td><td>Test dual auth flow (GitHub + TOTP)</td><td>In Progress</td></tr><tr><td>1.5</td><td>Document credentials in LOCAL_KEYS</td><td>In Progress</td></tr></tbody></table></div>
<h3 id="phase-2-core-services">Phase 2: Core Services<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-2-core-services" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> Planned
<strong>Dependencies:</strong> Phase 1</p>



































<div class="table-container"><table><thead><tr><th>Step</th><th>Task</th><th>Status</th></tr></thead><tbody><tr><td>2.1</td><td>Mail (Mailu) deployment</td><td>Done</td></tr><tr><td>2.2</td><td>Sync (Syncthing) deployment</td><td>Done</td></tr><tr><td>2.3</td><td>Analytics (Matomo) deployment</td><td>Done</td></tr><tr><td>2.4</td><td>Vault (Vaultwarden) deployment</td><td>Planned</td></tr><tr><td>2.5</td><td>Photos (Photoprism) deployment</td><td>In Progress</td></tr></tbody></table></div>
<h3 id="phase-3-devops-infrastructure">Phase 3: DevOps Infrastructure<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-3-devops-infrastructure" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> Planned
<strong>Dependencies:</strong> Phase 1, Phase 2</p>






























<div class="table-container"><table><thead><tr><th>Step</th><th>Task</th><th>Status</th></tr></thead><tbody><tr><td>3.1</td><td>Monitoring collectors (Python)</td><td>Planned</td></tr><tr><td>3.2</td><td>Flask API endpoints</td><td>Planned</td></tr><tr><td>3.3</td><td>Cloud Portal (SvelteKit)</td><td>Planned</td></tr><tr><td>3.4</td><td>Architecture Specs system</td><td>Planned</td></tr></tbody></table></div>
<h3 id="phase-4-advanced-services">Phase 4: Advanced Services<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-4-advanced-services" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> Future
<strong>Dependencies:</strong> Phase 3</p>

























<div class="table-container"><table><thead><tr><th>Step</th><th>Task</th><th>Status</th></tr></thead><tbody><tr><td>4.1</td><td>Terminals (ttyd, code-server)</td><td>Future</td></tr><tr><td>4.2</td><td>Workflows (Temporal, LangGraph)</td><td>Future</td></tr><tr><td>4.3</td><td>AI Chat integration</td><td>Future</td></tr></tbody></table></div>
<hr/>
<h2 id="c2-dependencies---service-graph">C2) Dependencies - Service Graph<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c2-dependencies---service-graph" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────┐
│                      SERVICE DEPENDENCY GRAPH                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  LAYER 0: INFRASTRUCTURE (must be first)                            │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐                             │
│  │   NPM   │  │Authelia │  │  Redis  │                             │
│  │ (proxy) │→ │  (auth) │→ │ (cache) │                             │
│  └────┬────┘  └────┬────┘  └─────────┘                             │
│       │            │                                                │
│  LAYER 1: CORE SERVICES (24/7)                                      │
│       ▼            ▼                                                │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐                             │
│  │  Mail   │  │Analytics│  │Flask API│                             │
│  └─────────┘  └─────────┘  └────┬────┘                             │
│                                 │                                   │
│  LAYER 2: ON-DEMAND SERVICES                                        │
│                                 ▼                                   │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐               │
│  │  Sync   │  │ Photos  │  │  Vault  │  │   Git   │               │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘               │
│                                                                     │
│  LAYER 3: PORTAL &amp; MONITORING                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  Cloud Portal (depends on: Flask API, all services)          │   │
│  │  Monitoring (depends on: all VMs running collectors)         │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<hr/>
<h2 id="c3-backlog---prioritized-tasks">C3) Backlog - Prioritized Tasks<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#c3-backlog---prioritized-tasks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="high-priority-now">High Priority (Now)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#high-priority-now" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Complete Authelia TOTP setup</li>
<li class="task-list-item"><input type="checkbox" disabled/> Deploy Photoprism with proper auth</li>
<li class="task-list-item"><input type="checkbox" disabled/> Setup Vaultwarden</li>
<li class="task-list-item"><input type="checkbox" disabled/> Document all credentials in LOCAL_KEYS</li>
</ul>
<h3 id="medium-priority-next">Medium Priority (Next)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#medium-priority-next" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Build monitoring collectors</li>
<li class="task-list-item"><input type="checkbox" disabled/> Create Cloud Portal MVP</li>
<li class="task-list-item"><input type="checkbox" disabled/> Setup architecture specs system</li>
<li class="task-list-item"><input type="checkbox" disabled/> Configure email alerts</li>
</ul>
<h3 id="low-priority-later">Low Priority (Later)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#low-priority-later" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Terminal services (ttyd, code-server)</li>
<li class="task-list-item"><input type="checkbox" disabled/> Workflow engines (Temporal, LangGraph)</li>
<li class="task-list-item"><input type="checkbox" disabled/> AI Chat integration</li>
<li class="task-list-item"><input type="checkbox" disabled/> GPU on-demand provisioning</li>
</ul>
<h3 id="tech-debt">Tech Debt<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#tech-debt" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled/> Consolidate docker-compose files</li>
<li class="task-list-item"><input type="checkbox" disabled/> Standardize environment variables</li>
<li class="task-list-item"><input type="checkbox" disabled/> Create backup automation scripts</li>
<li class="task-list-item"><input type="checkbox" disabled/> Document disaster recovery procedures</li>
</ul>
<hr/>
<h1 id="d-devops---operations--observability">D) DevOps - Operations &amp; Observability<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d-devops---operations--observability" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="d1-portal---cloud-control-center-c3">D1) Portal - Cloud Control Center (C3)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d1-portal---cloud-control-center-c3" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p><strong>Stack:</strong> Homepage (gethomepage.dev) + Uptime Kuma</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────┐
│  CLOUD CONTROL CENTER (C3)                    cloud.diegonmarcos.com    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  01. HOMEPAGE (Service Launcher)                                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │   📧 Mail   │  │   📂 Sync   │  │   📷 Photos │  │   🔐 Vault  │    │
│  │   ● online  │  │   ● online  │  │   ● online  │  │   ○ offline │    │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │
│                                                                         │
│  10. UPTIME KUMA (status.diegonmarcos.com)                             │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │  All Systems Operational  ████████████████████████████ 99.9%    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  11. DOCKGE (dockge.diegonmarcos.com)     21. DOZZLE (logs)            │
│  ┌──────────────────────────┐             ┌──────────────────────────┐ │
│  │  Stacks: 8 running       │             │  Container logs viewer   │ │
│  └──────────────────────────┘             └──────────────────────────┘ │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>C3 Components:</strong></p>















































<div class="table-container"><table><thead><tr><th>Code</th><th>Service</th><th>URL</th><th>Purpose</th></tr></thead><tbody><tr><td>01</td><td>Homepage</td><td>cloud.diegonmarcos.com</td><td>Service launcher + widgets</td></tr><tr><td>10</td><td>Uptime Kuma</td><td>status.diegonmarcos.com</td><td>Health checks + public status</td></tr><tr><td>11</td><td>Dockge</td><td>dockge.diegonmarcos.com</td><td>Docker Compose management</td></tr><tr><td>20</td><td>Borgmatic</td><td>(cron)</td><td>Automated backups</td></tr><tr><td>21</td><td>Dozzle</td><td>logs.diegonmarcos.com</td><td>Real-time container logs</td></tr><tr><td>22</td><td>Trivy</td><td>(cron)</td><td>Container vulnerability scans</td></tr></tbody></table></div>
<hr/>
<h2 id="d2-monitoring---uptime-kuma">D2) Monitoring - Uptime Kuma<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d2-monitoring---uptime-kuma" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p><strong>Tool:</strong> Uptime Kuma (status.diegonmarcos.com)</p>
<h3 id="monitoring-architecture">Monitoring Architecture<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#monitoring-architecture" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────┐
│                         UPTIME KUMA                                  │
│                   status.diegonmarcos.com                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Monitor Types:                                                     │
│  • HTTP(s) - Website/API availability                               │
│  • TCP Port - Service port checks                                   │
│  • Ping - Host availability                                         │
│  • DNS - DNS resolution checks                                      │
│  • Docker - Container health                                        │
│                                                                     │
│  Notifications:                                                     │
│  • Email (SMTP via Mailu)                                          │
│  • Discord/Telegram webhooks                                        │
│  • Pushover / Gotify                                               │
│                                                                     │
│  Features:                                                          │
│  • Public status page (badge embeds)                               │
│  • Incident history                                                │
│  • Response time graphs                                            │
│  • Multi-language                                                  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="monitor-configuration">Monitor Configuration<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#monitor-configuration" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>















































<div class="table-container"><table><thead><tr><th>Service</th><th>Type</th><th>Interval</th><th>Timeout</th></tr></thead><tbody><tr><td>NPM Proxy</td><td>HTTP</td><td>60s</td><td>10s</td></tr><tr><td>Authelia</td><td>HTTP</td><td>60s</td><td>10s</td></tr><tr><td>Mail (SMTP)</td><td>TCP:25</td><td>300s</td><td>30s</td></tr><tr><td>Analytics</td><td>HTTP</td><td>300s</td><td>10s</td></tr><tr><td>Photos</td><td>HTTP</td><td>300s</td><td>10s</td></tr><tr><td>Sync</td><td>HTTP</td><td>300s</td><td>10s</td></tr></tbody></table></div>
<h3 id="alert-thresholds">Alert Thresholds<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#alert-thresholds" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>





























<div class="table-container"><table><thead><tr><th>Metric</th><th>Warning</th><th>Critical</th><th>Action</th></tr></thead><tbody><tr><td>Response Time</td><td>>2s</td><td>>5s</td><td>Email alert</td></tr><tr><td>Consecutive Fails</td><td>2</td><td>5</td><td>Email + restart</td></tr><tr><td>Certificate Expiry</td><td>14 days</td><td>7 days</td><td>Email alert</td></tr></tbody></table></div>
<hr/>
<h2 id="d3-knowledge-center">D3) Knowledge Center<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d3-knowledge-center" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="architecture-docs">Architecture Docs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#architecture-docs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Plan:</strong> <code>0.spec/Task_ArchSpecs/PLAN_ArchSpecs.md</code></p>

























<div class="table-container"><table><thead><tr><th>Document</th><th>Purpose</th><th>Format</th></tr></thead><tbody><tr><td>MASTERPLAN.md</td><td>This document</td><td>Markdown</td></tr><tr><td>Service specs</td><td>Per-service details</td><td>JSON + MD</td></tr><tr><td>Network diagrams</td><td>Topology visualization</td><td>Mermaid</td></tr></tbody></table></div>
<h3 id="api-docs">API Docs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#api-docs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>

















<div class="table-container"><table><thead><tr><th>Endpoint</th><th>Documentation</th></tr></thead><tbody><tr><td><code>/api/v1/*</code></td><td>OpenAPI 3.0 spec</td></tr><tr><td>Service APIs</td><td>Per-service Swagger</td></tr></tbody></table></div>
<h3 id="wiki--faq">Wiki / FAQ<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#wiki--faq" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>





















<div class="table-container"><table><thead><tr><th>Topic</th><th>Content</th></tr></thead><tbody><tr><td>Getting Started</td><td>How to access services</td></tr><tr><td>Troubleshooting</td><td>Common issues &amp; fixes</td></tr><tr><td>Runbooks</td><td>Operational procedures</td></tr></tbody></table></div>
<hr/>
<h2 id="d4-code-practices">D4) Code Practices<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d4-code-practices" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<blockquote>
<p>Reference: <code>MASTERPLAN_LINKTREE.md → D8) Code Practices</code> (full details)</p>
</blockquote>
<h3 id="backend-python">Backend (Python)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#backend-python" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Category          | Standard
──────────────────┼────────────────────────────────────────────────────────
Language          | Python 3.11+ with type hints
Package Manager   | Poetry (NOT pip install globally)
Framework         | Flask for APIs, FastAPI for async
Templating        | Jinja2 for HTML/email/config generation
Data Processing   | Pandas for DataFrames, xsv for heavy CSV
Testing           | pytest + pytest-cov
Linting           | ruff (replaces flake8, isort, black)
</code></pre>
<h3 id="infrastructure-code">Infrastructure Code<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#infrastructure-code" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Category          | Standard
──────────────────┼────────────────────────────────────────────────────────
IaC               | Docker Compose (no Kubernetes for personal infra)
Config Management | Jinja2 templates → YAML/TOML
Secrets           | Environment variables, never in code
Shell Scripts     | Bash with shellcheck, set -euo pipefail
</code></pre>
<h3 id="docker-compose-standards">Docker Compose Standards<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#docker-compose-standards" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="yaml" data-theme="github-light github-dark"><code data-language="yaml" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Standard pattern for all services</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.8&quot;</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${IMAGE}:${VERSION:-latest}</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${SERVICE}-app</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">internal</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./data:/data:rw</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./config:/config:ro</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=${TZ:-Europe/Berlin}</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    healthcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CMD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;curl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:${PORT}/health&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30s</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">10s</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      retries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.centurylinklabs.watchtower.enable=true&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  internal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span data-line><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span></code></pre></figure>
<hr/>
<h2 id="d5-system-practices">D5) System Practices<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#d5-system-practices" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="package-management">Package Management<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#package-management" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Rule:</strong> NEVER install packages system-wide. Use isolated environments.</p>
<pre><code>Tool              | Purpose                    | Command
──────────────────┼────────────────────────────┼────────────────────────────────
Poetry            | Python dependencies        | poetry add &lt;package>
pipx              | Python CLI tools           | pipx install &lt;tool>
nvm               | Node.js versions           | nvm use 18
npm (local)       | JS dependencies            | npm install (in project)
Docker            | Service isolation          | docker compose up
</code></pre>
<h3 id="poetry-workflow">Poetry Workflow<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#poetry-workflow" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Initialize new project</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/project</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Add dependencies</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> flask</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jinja2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requests</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ruff</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run commands in virtual environment</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script.py</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pytest</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install from pyproject.toml</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Export requirements.txt (for Docker)</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre></figure>
<h3 id="project-structure-python-backend">Project Structure (Python Backend)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#project-structure-python-backend" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>/&lt;service>/
├── pyproject.toml           # Poetry config + dependencies
├── poetry.lock              # Locked versions
├── src/
│   └── &lt;service>/
│       ├── __init__.py
│       ├── main.py          # Entry point
│       ├── api/             # API routes
│       ├── services/        # Business logic
│       ├── models/          # Data models
│       └── utils/           # Helpers
├── tests/
│   └── test_*.py
├── templates/               # Jinja2 templates
├── config/
│   └── settings.py          # Pydantic settings
├── Dockerfile
├── docker-compose.yml
└── .env.example
</code></pre>
<h3 id="shell-script-standards">Shell Script Standards<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#shell-script-standards" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/usr/bin/env bash</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -euo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pipefail</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Exit on error, undefined vars, pipe failures</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Constants at top</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">readonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SCRIPT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BASH_SOURCE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[0]}&quot;)&quot; &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)&quot;</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">readonly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LOG_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/log/script.log&quot;</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Functions before main logic</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +'%Y-%m-%d %H:%M:%S')] </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tee</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$LOG_FILE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">die</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ERROR: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Main logic</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Starting...&quot;</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ...</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Done.&quot;</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$@</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></figure>
<h3 id="environment-variables">Environment Variables<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#environment-variables" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-light github-dark"><code data-language="bash" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env.example (committed to git)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SERVICE_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myservice</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SERVICE_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8080</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DATABASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgresql://localhost:5432/mydb</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SECRET_KEY=  # Never commit actual secrets</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .env (NOT committed, in .gitignore)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SECRET_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actual-secret-here</span></span></code></pre></figure>
<h3 id="git-practices">Git Practices<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#git-practices" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Pattern           | Rule
──────────────────┼────────────────────────────────────────────────────────
.gitignore        | Always include: .env, __pycache__, node_modules, dist/
Commits           | Conventional: feat:, fix:, docs:, chore:, refactor:
Branches          | main (production), dev (integration), feature/*
Secrets           | NEVER commit, use .env + .gitignore
Large files       | Use Git LFS or external storage
</code></pre>
<h3 id="systemd-services-for-non-docker">Systemd Services (for non-Docker)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#systemd-services-for-non-docker" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="ini" data-theme="github-light github-dark"><code data-language="ini" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /etc/systemd/system/myservice.service</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Unit]</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=My Service</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">After</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=network.target</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Service]</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=simple</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=diego</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WorkingDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=/home/diego/services/myservice</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExecStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=/home/diego/.local/bin/poetry run python -m myservice</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=always</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestartSec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=5</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PYTHONUNBUFFERED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[Install]</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WantedBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=multi-user.target</span></span></code></pre></figure>
<h3 id="backup-strategy">Backup Strategy<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#backup-strategy" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<pre><code>Data Type         | Method                     | Frequency     | Retention
──────────────────┼────────────────────────────┼───────────────┼─────────────
Configs           | Git push                   | On change     | Forever
User data         | Syncthing                  | Real-time     | 30 days
Databases         | pg_dump / mysqldump        | Daily 3AM     | 7 days
VM snapshots      | Cloud provider             | Weekly        | 4 weeks
LOCAL_KEYS        | Manual to encrypted USB    | Monthly       | Forever
</code></pre>
<hr/>
<h2 id="file-structure">File Structure<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#file-structure" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<pre><code>/home/diego/Documents/Git/back-System/cloud/
├── 0.spec/
│   ├── MASTERPLAN_CLOUD.md              # THIS FILE (Product-Engineer Handoff)
│   │
│   ├── Task_Security2faOAuth20/         # B1) Security Architecture
│   │   └── PLAN_DualAuth_Security.md
│   │
│   └── Task_ArchSpecs/                  # B2) Service Architecture
│       └── PLAN_ArchSpecs.md
│
├── 1.ops/
│   ├── cloud_dash.json                  # Services data (source of truth)
│   ├── cloud_dash.py                    # Flask API server
│   └── vm-control.sh                    # VM start/stop script
│
├── 2.app/                               # C3 Docker Compose stacks
│   ├── c3-homepage/                     # 01 Homepage dashboard
│   │   ├── docker-compose.yml
│   │   └── config/
│   │       ├── services.yaml
│   │       └── bookmarks.yaml
│   ├── c3-uptime-kuma/                  # 10 Uptime Kuma
│   │   └── docker-compose.yml
│   ├── c3-dockge/                       # 11 Dockge
│   │   └── docker-compose.yml
│   ├── c3-borgmatic/                    # 20 Borgmatic
│   │   ├── docker-compose.yml
│   │   └── borgmatic.yaml
│   ├── c3-dozzle/                       # 21 Dozzle
│   │   └── docker-compose.yml
│   └── c3-trivy/                        # 22 Trivy
│       └── trivy-scan.sh
│
├── vps_oracle/
│   ├── vm-oci-f-micro_1/               # Mail VM
│   ├── vm-oci-f-micro_2/               # Analytics VM
│   └── vm-oci-p-flex_1/                # Dev services VM (hosts C3)
│
└── vps_gcloud/
    └── vm-gcp-f-micro_1/               # Proxy + Auth VM
</code></pre>
<hr/>
<h2 id="document-map">Document Map<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#document-map" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>






































































<div class="table-container"><table><thead><tr><th>Section</th><th>Purpose</th><th>Owner</th></tr></thead><tbody><tr><td><strong>A) HANDOFF</strong></td><td>Complete service &amp; stack definition</td><td>Product + Engineer</td></tr><tr><td>A0-A1</td><td>Stack choices + Service catalog</td><td>Product defines</td></tr><tr><td>A2-A3</td><td>Resources + Infrastructure</td><td>Engineer validates</td></tr><tr><td>A4-A5</td><td>Tech research + Current state</td><td>Both collaborate</td></tr><tr><td><strong>B) ARCHITECTURE</strong></td><td>Technical deep dives</td><td>Engineer owns</td></tr><tr><td>B1</td><td>Security patterns</td><td>Engineer</td></tr><tr><td>B2</td><td>Service patterns</td><td>Engineer</td></tr><tr><td>B3</td><td>Infrastructure patterns</td><td>Engineer</td></tr><tr><td><strong>C) ROADMAP</strong></td><td>Planning &amp; prioritization</td><td>Product + Engineer</td></tr><tr><td>C1-C3</td><td>Phases, dependencies, backlog</td><td>Both collaborate</td></tr><tr><td><strong>D) DEVOPS</strong></td><td>Operations &amp; observability</td><td>Engineer owns</td></tr><tr><td>D1-D3</td><td>Portal, monitoring, docs</td><td>Engineer</td></tr></tbody></table></div>
<hr/>
<h2 id="quick-reference">Quick Reference<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#quick-reference" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="service-urls">Service URLs<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#service-urls" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>




























































<div class="table-container"><table><thead><tr><th>Service</th><th>URL</th><th>Auth</th></tr></thead><tbody><tr><td>NPM Admin</td><td><a href="http://34.55.55.234:81" class="external">http://34.55.55.234:81<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Local</td></tr><tr><td>Authelia</td><td><a href="https://auth.diegonmarcos.com" class="external">https://auth.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>-</td></tr><tr><td>Mail</td><td><a href="https://mail.diegonmarcos.com" class="external">https://mail.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Analytics</td><td><a href="https://analytics.diegonmarcos.com" class="external">https://analytics.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>n8n</td><td><a href="https://n8n.diegonmarcos.com" class="external">https://n8n.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Gitea</td><td><a href="https://git.diegonmarcos.com" class="external">https://git.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Sync</td><td><a href="https://sync.diegonmarcos.com" class="external">https://sync.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Vault</td><td><a href="https://vault.diegonmarcos.com" class="external">https://vault.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Photos</td><td><a href="https://photos.diegonmarcos.com" class="external">https://photos.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr><tr><td>Cloud</td><td><a href="https://cloud.diegonmarcos.com" class="external">https://cloud.diegonmarcos.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></td><td>Authelia</td></tr></tbody></table></div>
<hr/>
<p><em>Generated by Claude (Opus) - CTO</em>
<em>Last Updated: 2025-12-11</em></p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-0" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><ul id="list-1" class="toc-content overflow"><li class="depth-0"><a href="#cloud-infrastructure-master-plan-v2" data-for="cloud-infrastructure-master-plan-v2">Cloud Infrastructure Master Plan v2</a></li><li class="depth-0"><a href="#executive-summary" data-for="executive-summary">Executive Summary</a></li><li class="depth-0"><a href="#a-handoff---services--infrastructure-definition" data-for="a-handoff---services--infrastructure-definition">A) HANDOFF - Services &amp; Infrastructure Definition</a></li><li class="depth-1"><a href="#a0-products-fridge" data-for="a0-products-fridge">A0) Products (FRIDGE)</a></li><li class="depth-2"><a href="#terminals" data-for="terminals">Terminals</a></li><li class="depth-2"><a href="#user-productivity" data-for="user-productivity">User Productivity</a></li><li class="depth-2"><a href="#user-security" data-for="user-security">User Security</a></li><li class="depth-2"><a href="#user-profiledevelopmentsportfolio" data-for="user-profiledevelopmentsportfolio">User Profile/Developments/Portfolio</a></li><li class="depth-2"><a href="#user-ais-models" data-for="user-ais-models">User AIs Models</a></li><li class="depth-1"><a href="#a1-infra-services-kitchen" data-for="a1-infra-services-kitchen">A1) Infra Services (KITCHEN)</a></li><li class="depth-2"><a href="#cloud-control-center-c3" data-for="cloud-control-center-c3">Cloud Control Center (C3)</a></li><li class="depth-2"><a href="#devs-security" data-for="devs-security">Devs Security</a></li><li class="depth-2"><a href="#devs-infrastructure" data-for="devs-infrastructure">Devs Infrastructure</a></li><li class="depth-2"><a href="#tech-definition" data-for="tech-definition">Tech Definition</a></li><li class="depth-1"><a href="#a2-infra-resources" data-for="a2-infra-resources">A2) Infra Resources</a></li><li class="depth-2"><a href="#a20-resource-allocation" data-for="a20-resource-allocation">A20) Resource Allocation</a></li><li class="depth-2"><a href="#a21-maps--topology" data-for="a21-maps--topology">A21) Maps &amp; Topology</a></li><li class="depth-2"><a href="#a22-costs" data-for="a22-costs">A22) Costs</a></li><li class="depth-1"><a href="#a3-tech-research" data-for="a3-tech-research">A3) Tech Research</a></li><li class="depth-1"><a href="#a4-today-current-state" data-for="a4-today-current-state">A4) Today (Current State)</a></li><li class="depth-2"><a href="#by-service" data-for="by-service">by Service</a></li><li class="depth-2"><a href="#by-vm" data-for="by-vm">by VM</a></li><li class="depth-0"><a href="#b-architecture---technical-deep-dives" data-for="b-architecture---technical-deep-dives">B) Architecture - Technical Deep Dives</a></li><li class="depth-1"><a href="#b1-security-architecture" data-for="b1-security-architecture">B1) Security Architecture</a></li><li class="depth-2"><a href="#b11-web-auth---dual-authentication" data-for="b11-web-auth---dual-authentication">B11) Web Auth - Dual Authentication</a></li><li class="depth-2"><a href="#b12-dev-access---ssh--vault-management" data-for="b12-dev-access---ssh--vault-management">B12) Dev Access - SSH &amp; Vault Management</a></li><li class="depth-2"><a href="#b13-isolation---network-segmentation--hardening" data-for="b13-isolation---network-segmentation--hardening">B13) Isolation - Network Segmentation &amp; Hardening</a></li><li class="depth-1"><a href="#b2-service-architecture" data-for="b2-service-architecture">B2) Service Architecture</a></li><li class="depth-2"><a href="#b21-containers---docker-compose-patterns" data-for="b21-containers---docker-compose-patterns">B21) Containers - Docker Compose Patterns</a></li><li class="depth-2"><a href="#b22-databases---schemas--migrations" data-for="b22-databases---schemas--migrations">B22) Databases - Schemas &amp; Migrations</a></li><li class="depth-2"><a href="#b23-apis---contracts--versioning" data-for="b23-apis---contracts--versioning">B23) APIs - Contracts &amp; Versioning</a></li><li class="depth-1"><a href="#b3-infrastructure-architecture" data-for="b3-infrastructure-architecture">B3) Infrastructure Architecture</a></li><li class="depth-2"><a href="#b31-networking---dns-ssl-reverse-proxy" data-for="b31-networking---dns-ssl-reverse-proxy">B31) Networking - DNS, SSL, Reverse Proxy</a></li><li class="depth-2"><a href="#b32-storage---volumes--backups" data-for="b32-storage---volumes--backups">B32) Storage - Volumes &amp; Backups</a></li><li class="depth-2"><a href="#b33-scaling---wake-on-demand--gpu" data-for="b33-scaling---wake-on-demand--gpu">B33) Scaling - Wake-on-Demand &amp; GPU</a></li><li class="depth-0"><a href="#c-roadmap---planning--prioritization" data-for="c-roadmap---planning--prioritization">C) Roadmap - Planning &amp; Prioritization</a></li><li class="depth-1"><a href="#c1-phases---implementation-milestones" data-for="c1-phases---implementation-milestones">C1) Phases - Implementation Milestones</a></li><li class="depth-2"><a href="#phase-1-security-foundation-priority" data-for="phase-1-security-foundation-priority">Phase 1: Security Foundation (PRIORITY)</a></li><li class="depth-2"><a href="#phase-2-core-services" data-for="phase-2-core-services">Phase 2: Core Services</a></li><li class="depth-2"><a href="#phase-3-devops-infrastructure" data-for="phase-3-devops-infrastructure">Phase 3: DevOps Infrastructure</a></li><li class="depth-2"><a href="#phase-4-advanced-services" data-for="phase-4-advanced-services">Phase 4: Advanced Services</a></li><li class="depth-1"><a href="#c2-dependencies---service-graph" data-for="c2-dependencies---service-graph">C2) Dependencies - Service Graph</a></li><li class="depth-1"><a href="#c3-backlog---prioritized-tasks" data-for="c3-backlog---prioritized-tasks">C3) Backlog - Prioritized Tasks</a></li><li class="depth-2"><a href="#high-priority-now" data-for="high-priority-now">High Priority (Now)</a></li><li class="depth-2"><a href="#medium-priority-next" data-for="medium-priority-next">Medium Priority (Next)</a></li><li class="depth-2"><a href="#low-priority-later" data-for="low-priority-later">Low Priority (Later)</a></li><li class="depth-2"><a href="#tech-debt" data-for="tech-debt">Tech Debt</a></li><li class="depth-0"><a href="#d-devops---operations--observability" data-for="d-devops---operations--observability">D) DevOps - Operations &amp; Observability</a></li><li class="depth-1"><a href="#d1-portal---cloud-control-center-c3" data-for="d1-portal---cloud-control-center-c3">D1) Portal - Cloud Control Center (C3)</a></li><li class="depth-1"><a href="#d2-monitoring---uptime-kuma" data-for="d2-monitoring---uptime-kuma">D2) Monitoring - Uptime Kuma</a></li><li class="depth-2"><a href="#monitoring-architecture" data-for="monitoring-architecture">Monitoring Architecture</a></li><li class="depth-2"><a href="#monitor-configuration" data-for="monitor-configuration">Monitor Configuration</a></li><li class="depth-2"><a href="#alert-thresholds" data-for="alert-thresholds">Alert Thresholds</a></li><li class="depth-1"><a href="#d3-knowledge-center" data-for="d3-knowledge-center">D3) Knowledge Center</a></li><li class="depth-2"><a href="#architecture-docs" data-for="architecture-docs">Architecture Docs</a></li><li class="depth-2"><a href="#api-docs" data-for="api-docs">API Docs</a></li><li class="depth-2"><a href="#wiki--faq" data-for="wiki--faq">Wiki / FAQ</a></li><li class="depth-1"><a href="#d4-code-practices" data-for="d4-code-practices">D4) Code Practices</a></li><li class="depth-2"><a href="#backend-python" data-for="backend-python">Backend (Python)</a></li><li class="depth-2"><a href="#infrastructure-code" data-for="infrastructure-code">Infrastructure Code</a></li><li class="depth-2"><a href="#docker-compose-standards" data-for="docker-compose-standards">Docker Compose Standards</a></li><li class="depth-1"><a href="#d5-system-practices" data-for="d5-system-practices">D5) System Practices</a></li><li class="depth-2"><a href="#package-management" data-for="package-management">Package Management</a></li><li class="depth-2"><a href="#poetry-workflow" data-for="poetry-workflow">Poetry Workflow</a></li><li class="depth-2"><a href="#project-structure-python-backend" data-for="project-structure-python-backend">Project Structure (Python Backend)</a></li><li class="depth-2"><a href="#shell-script-standards" data-for="shell-script-standards">Shell Script Standards</a></li><li class="depth-2"><a href="#environment-variables" data-for="environment-variables">Environment Variables</a></li><li class="depth-2"><a href="#git-practices" data-for="git-practices">Git Practices</a></li><li class="depth-2"><a href="#systemd-services-for-non-docker" data-for="systemd-services-for-non-docker">Systemd Services (for non-Docker)</a></li><li class="depth-2"><a href="#backup-strategy" data-for="backup-strategy">Backup Strategy</a></li><li class="depth-1"><a href="#file-structure" data-for="file-structure">File Structure</a></li><li class="depth-1"><a href="#document-map" data-for="document-map">Document Map</a></li><li class="depth-1"><a href="#quick-reference" data-for="quick-reference">Quick Reference</a></li><li class="depth-2"><a href="#service-urls" data-for="service-urls">Service URLs</a></li><li class="overflow-end"></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> © 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function E(a,e){if(!a)return;function t(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function n(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}a?.addEventListener("click",t),window.addCleanup(()=>a?.removeEventListener("click",t)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function f(a){for(;a.firstChild;)a.removeChild(a.firstChild)}var m=class{constructor(e,t){this.container=e;this.content=t;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),t=this.onMouseMove.bind(this),n=this.onMouseUp.bind(this),o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this),s=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),this.container.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i),window.addEventListener("resize",s),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",t),()=>document.removeEventListener("mouseup",n),()=>this.container.removeEventListener("touchstart",o),()=>document.removeEventListener("touchmove",r),()=>document.removeEventListener("touchend",i),()=>window.removeEventListener("resize",s))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),n=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(n),e.appendChild(o),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let n=document.createElement("button");return n.textContent=e,n.className="mermaid-control-button",n.addEventListener("click",t),window.addCleanup(()=>n.removeEventListener("click",t)),n}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onTouchStart(e){if(e.touches.length!==1)return;this.isDragging=!0;let t=e.touches[0];this.startPan={x:t.clientX-this.currentPan.x,y:t.clientY-this.currentPan.y}}onTouchMove(e){if(!this.isDragging||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.currentPan={x:t.clientX-this.startPan.x,y:t.clientY-this.startPan.y},this.updateTransform()}onTouchEnd(){this.isDragging=!1}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),n=this.content.getBoundingClientRect(),o=n.width/2,r=n.height/2,i=t-this.scale;this.currentPan.x-=o*i,this.currentPan.y-=r*i,this.scale=t,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){let t=this.content.querySelector("svg").getBoundingClientRect(),n=t.width/this.scale,o=t.height/this.scale;this.scale=1,this.currentPan={x:(this.container.clientWidth-n)/2,y:(this.container.clientHeight-o)/2},this.updateTransform()}},T=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],y;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;y||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let t=y.default,n=new WeakMap;for(let r of e)n.set(r,r.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let c=n.get(s);c&&(s.innerHTML=c)}let r=T.reduce((s,c)=>(s[c]=window.getComputedStyle(document.documentElement).getPropertyValue(c),s),{}),i=document.documentElement.getAttribute("saved-theme")==="dark";t.initialize({startOnLoad:!1,securityLevel:"loose",theme:i?"dark":"base",themeVariables:{fontFamily:r["--codeFont"],primaryColor:r["--light"],primaryTextColor:r["--darkgray"],primaryBorderColor:r["--tertiary"],lineColor:r["--darkgray"],secondaryColor:r["--secondary"],tertiaryColor:r["--tertiary"],clusterBkg:r["--light"],edgeLabelBackground:r["--highlight"]}}),await t.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let r=0;r<e.length;r++){let v=function(){let g=l.querySelector("#mermaid-space"),h=l.querySelector(".mermaid-content");if(!h)return;f(h);let w=i.querySelector("svg").cloneNode(!0);h.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new m(g,h)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},i=e[r],s=i.parentElement,c=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(c),L=c.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),E(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="./postscript.js" type="module" data-persist="true"></script></html>