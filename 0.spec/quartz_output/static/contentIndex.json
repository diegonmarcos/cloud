{"MASTERPLAN_CLOUD":{"slug":"MASTERPLAN_CLOUD","filePath":"MASTERPLAN_CLOUD.md","title":"MASTERPLAN_CLOUD","links":[],"tags":[],"content":"Cloud Infrastructure Master Plan v2\nProject: Diego’s Cloud Infrastructure\nCTO: Claude (Opus)\nDate: 2025-12-11\nStatus: PLANNING COMPLETE - READY FOR IMPLEMENTATION\n\nExecutive Summary\nThis master plan is a Product-Engineer Handoff Document defining Diego’s cloud infrastructure:\n\n\n                  \n                  A) HANDOFF - WHAT we&#039;re building \n                  \n                \n\n\nA0) Products (FRIDGE) - Name, Component, Stack, Purpose\n\nTerminals - WebTerminal, IDE, AI Chat\nUser Productivity - Mail, Calendar, Sync, Drive, etc.\nUser Security - VPN, Vault\nUser Profile/Developments/Portfolio - Linktree, CV, Projects\nUser AIs Models - Multi-Model → MASTERPLAN_AI.md\n\n\nA1) Infra Services (KITCHEN)\n\nCloud Control Center (C3)\n\nA10) FRONT (User View) - Dashboard &amp; Service Launcher\nA11) CONTROL CENTER (Operations) - Monitor, Orchestrate, Workflows\nA12) DATA &amp; SAFETY (Security Layer) - Backup, Security\nA13) AUDIT CENTER - Analytics, Audit\n\n\nDevs Security - Proxy (NPM), Authelia, OAuth2, VPN\nDevs Infrastructure - API Gateway, Cache\nTech Definition - DevOps, Security, WebDevs stacks\n\n\nA2) Infra Resources - Resource Allocation, Maps, Costs\n\nA20) Resource Allocation - VMs, IPs, ports, URLs\n\nA200) Resource Estimation - RAM, Storage, Bandwidth\nA201) VM Capacity &amp; Headroom - Capacity vs Allocated\nA202) Cost Estimation - Monthly costs breakdown\nA203) URL/Port Proxied - Service URL mapping\n\n\nA21) Maps &amp; Topology - Network diagrams, auth flow\nA22) Costs - Monthly cost summary\n\n\nA3) Tech Research - Framework comparisons\n\nFramework Comparison (Frontend) - Vanilla vs Vue vs Svelte\nFramework Comparison (Templating - Python/JS Backend) - Jinja2 vs Mako\nWhen to Use - Decision guide for each use case\n\n\nA4) Today (Current State) - Current running state\n\nby Service - Service status table\nby VM - VM status table\n\n\n\n\n\n\n\n                  \n                  B) ARCHITECTURE - HOW to build it \n                  \n                \n\n\nB1) Security Architecture\n\nB11) Web Auth - Dual Authentication - Dual auth, sessions\nB12) Dev Access - SSH &amp; Vault Management - SSH, Vault\nB13) Isolation - Network Segmentation &amp; Hardening - Network segmentation, firewall\n\n\nB2) Service Architecture\n\nB21) Containers - Docker Compose Patterns - Docker Compose patterns\nB22) Databases - Schemas &amp; Migrations - Schemas, migrations, backup\nB23) APIs - Contracts &amp; Versioning - Contracts, OpenAPI specs\n\n\nB3) Infrastructure Architecture\n\nB31) Networking - DNS, SSL, Reverse Proxy - DNS, SSL, reverse proxy\nB32) Storage - Volumes &amp; Backups - Volumes, backups, DR\nB33) Scaling - Wake-on-Demand &amp; GPU - Wake-on-demand, GPU provisioning\n\n\n\n\n\n\n\n                  \n                  C) ROADMAP - WHEN to build it \n                  \n                \n\n\nC1) Phases - Implementation Milestones - Implementation milestones\nC2) Dependencies - Service Graph - Service dependency graph\nC3) Backlog - Prioritized Tasks - Prioritized task list\n\n\n\n\n\n                  \n                  D) DEVOPS - HOW to operate it \n                  \n                \n\n\nD1) Portal - Cloud Control Center (C3) - Services access dashboard\nD2) Monitoring - Uptime Kuma - Metrics, alerts, health checks\nD3) Knowledge Center - Architecture docs, Wiki/FAQ\nD4) Code Practices - Python standards, Docker, Jinja2\nD5) System Practices - Poetry, pipx, nvm, backups\n\n\n\nDocument Purpose:\n\nA = WHAT → Complete service catalog + stack allocation (Product defines, Engineer validates)\nB = HOW → Technical specs for implementation (Engineer owns, Product reviews)\nC = WHEN → Roadmap and prioritization (Product + Engineer collaborate)\nD = OPS → Day-to-day operations (Engineer owns)\n\n\nA) HANDOFF - Services &amp; Infrastructure Definition\nA0) Products (FRIDGE)\n\nLayer 1 = Infrastructure tools (Terminals, Sync, etc.) - what you use to BUILD\n\nTerminals\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nterminals                | -                    | -                   | AI-Powered Dev Environment\n  ↳ terminals-front      | Hub Landing          | SvelteKit 5 + SCSS  | Tool selector UI\n                         |                      |                     |\n  ├─ terminal            | -                    | -                   | Web Terminal (bash/zsh/fish)\n  │    ↳ terminal-front  | Shell Selector       | SvelteKit 5 + SCSS  | Shell selector UI\n  │    ↳ terminal-app    | Terminal Server      | ttyd / wetty        | Terminal server\n  │    ↳ terminal-db0    | Storage              | Filesystem          | Shell history + dotfiles\n                         |                      |                     |\n  ├─ ide                 | -                    | -                   | Web IDE\n  │    ↳ ide-front       | IDE Launcher         | SvelteKit 5 + SCSS  | IDE launcher + selector\n  │    ↳ ide-app         | Code Server          | code-server         | Code server\n  │    ↳ ide-db0         | Storage              | Filesystem          | Workspaces + extensions\n                         |                      |                     |\n  └─ ai-chat             | -                    | -                   | AI Chat Assistant\n       ↳ ai-front        | Chat UI              | SvelteKit 5 + SCSS  | Chat interface\n       ↳ ai-app          | Chat Backend         | Open WebUI          | Chat backend\n       ↳ ai-api          | LLM API              | Ollama / OpenAI     | LLM API backend\n       ↳ ai-db0          | Database             | SQL:PostgreSQL      | Chat history + users\n\nUser Productivity\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nmail                     | -                    | -                   | Email Suite\n  ↳ mail-front           | Reverse Proxy        | Nginx               | Nginx reverse proxy\n  ↳ mail-admin           | Admin UI             | Mailu-Admin         | Admin web interface\n  ↳ mail-imap            | IMAP Server          | Dovecot             | IMAP server\n  ↳ mail-smtp            | SMTP Server          | Postfix             | SMTP server\n  ↳ mail-webmail         | Webmail Client       | Roundcube           | Webmail client\n  ↳ mail-db0             | Storage              | Maildir             | Mailboxes storage\n                         |                      |                     |\ncalendar                 | -                    | -                   | Calendar &amp; Contacts (CalDAV/CardDAV)\n  ↳ calendar-front       | Web UI               | Radicale (built-in) | Radicale web interface\n  ↳ calendar-app         | CalDAV Server        | Radicale            | CalDAV/CardDAV server\n  ↳ calendar-db0         | Storage              | Filesystem          | Calendar/contact files\n                         |                      |                     |\nsync                     | -                    | -                   | File Synchronization Hub\n  ↳ sync-front           | File Viewer          | SvelteKit 5 + SCSS  | File tree viewer (collapsible)\n  ↳ sync-app             | Aggregator           | Python3             | Aggregates drive+git\n                         |                      |                     |\n  ├─ drive               | -                    | -                   | Cloud Drive (Filesystem Mount)\n  │    ↳ drive-front     | File Browser         | SvelteKit 5 + SCSS  | File browser display\n  │    ↳ drive-app       | Mount Daemon         | Rclone              | Bisync / FUSE mount daemon\n  │    ↳ drive-db0       | Storage              | Filesystem          | Mount configs + cache\n                         |                      |                     |\n  └─ git                 | -                    | -                   | Git Hosting\n       ↳ git-front       | Login UI             | SvelteKit 5 + SCSS  | Login + repo display\n       ↳ git-app         | Git Server           | Gitea               | Git server + web UI\n       ↳ git-db0         | Database             | SQL:SQLite          | Users, issues, PRs\n       ↳ git-db_obj0     | Storage              | Filesystem          | Git repositories (.git objects)\n                         |                      |                     |\nphotos                   | -                    | -                   | Photo Library Management\n  ↳ photo-front          | Login UI             | SvelteKit 5 + SCSS  | Login + Front from Photoprism\n  ↳ photo-app            | Photo Engine         | Photoprism          | Photo viewer + AI tagging\n  ↳ photo-db0            | Database             | SQL:MariaDB         | Metadata (EXIF, location, AI)\n  ↳ photo-db_obj0        | Storage              | Filesystem          | Photo files storage\n                         |                      |                     |\nslides                   | -                    | -                   | Presentation Builder\n  ↳ slides-front         | Editor UI            | SvelteKit 5 + SCSS  | Slide editor + preview\n  ↳ slides-app           | Converter            | Marp                | Markdown to slides converter\n                         |                      |                     |\n  ├─ slidev              | -                    | -                   | Fast Slides (Dev-focused)\n  │    ↳ slidev-app      | Slides Engine        | Sli.dev             | Interactive slides engine\n  │    ↳ slidev-db0      | Storage              | Filesystem          | Slide source files (.md)\n                         |                      |                     |\n  └─ reveal              | -                    | -                   | Deep Slides (Rich presentations)\n       ↳ reveal-app      | Slides Engine        | Reveal.js           | Full-featured slides engine\n       ↳ reveal-db0      | Storage              | Filesystem          | Slide source files (.md/.html)\n                         |                      |                     |\nsheets                   | -                    | -                   | Spreadsheet &amp; Data Processing\n  ↳ sheets-front         | Query UI             | SvelteKit 5 + SCSS  | Data viewer + query UI\n  ↳ sheets-app           | Orchestrator         | Python3             | Data processing orchestrator\n                         |                      |                     |\n  ├─ pandas              | -                    | -                   | Standard Data Jobs\n  │    ↳ pandas-app      | DataFrame Engine     | Python:Pandas       | DataFrame processing\n  │    ↳ pandas-db0      | Storage              | Filesystem          | Data files (.csv, .xlsx, .parquet)\n                         |                      |                     |\n  └─ xsv                 | -                    | -                   | Heavy Lift &amp; Speed\n       ↳ xsv-app         | CSV Engine           | xsv (Rust)          | High-perf CSV processing\n       ↳ xsv-db0         | Storage              | Filesystem          | Large data files\n                         |                      |                     |\ndashboards               | -                    | -                   | Data Dashboards &amp; Notebooks\n  ↳ dashboards-front     | Selector UI          | SvelteKit 5 + SCSS  | Dashboard selector UI\n  ↳ dashboards-app       | Orchestrator         | Python3             | Dashboard orchestrator\n                         |                      |                     |\n  ├─ jupyter             | -                    | -                   | Interactive Notebooks\n  │    ↳ jupyter-front   | Notebook UI          | JupyterLab (built-in)| JupyterLab interface\n  │    ↳ jupyter-app     | Notebook Server      | JupyterLab          | Notebook server + kernels\n  │    ↳ jupyter-db0     | Storage              | Filesystem          | Notebooks + workspace\n                         |                      |                     |\n  └─ dash                | -                    | -                   | Python Dashboards\n       ↳ dash-app        | Dashboard Server     | Plotly Dash         | Dashboard server\n       ↳ dash-db0        | Storage              | Filesystem          | Dashboard configs + data\n                         |                      |                     |\nvault                    | -                    | -                   | Password Manager\n  ↳ vault-front          | Login UI             | Vaultwarden (built-in)| Vaultwarden web interface\n  ↳ vault-app            | Password Server      | Vaultwarden         | Bitwarden self-hosted\n  ↳ vault-db0            | Database             | SQL:SQLite          | Encrypted credentials\n\nUser Security\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\n\n\n\nLayer 2 = Built solutions - what you CREATE with those tools\n\nUser Profile/Developments/Portfolio\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nlinktree                 | -                    | -                   | Personal Portfolio &amp; Link Aggregator\n  ↳ linktree-front       | Link Hub UI          | Vanilla HTML+CSS+JS | Animated link hub (glassmorphic)\n  ↳ linktree-app         | Static Host          | GitHub Pages        | Static site (no backend)\n  ↳ linktree-db0         | Storage              | JSON / Markdown     | Links config\n                         |                      |                     |\n  Sections:              |                      |                     |\n    • Professional       | -                    | -                   | LinkedIn, GitHub, CV, Ventures\n    • Repos              | -                    | -                   | CS, ML, DevOps, Cybersec\n    • Personal           | -                    | -                   | Social, Music, Fitness, Travel\n    • Tools              | -                    | -                   | Cloud Dash, Health, Markets, Maps\n    • Circus             | -                    | -                   | Games, Music, Movies\n                         |                      |                     |\n  Features:              |                      |                     |\n    • Dual carousel      | -                    | -                   | Professional/Personal toggle\n    • Gallery/Lite mode  | -                    | -                   | Multiple display modes\n    • Navigation         | -                    | -                   | Keyboard/gesture support\n\nUser AIs Models\n\nDetailed Spec: 0.spec/MASTERPLAN_AI.md (separate infrastructure - performance-focused)\nStatus: Premium project (will merge when ready)\n\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nai-chat (Terminals)      | -                    | -                   | AI Chat Interface\n  ↳ Mode 1: API Keys     | External APIs        | OpenAI/Claude/etc   | Connect external APIs\n  ↳ Mode 2: Multi-Model  | Self-hosted          | → MASTERPLAN_AI.md  | Frontend for AI infrastructure\n                         |                      |                     |\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\n; MASTERPLAN_AI.md for more details:                                          |\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\n\n\n\nA1) Infra Services (KITCHEN)\nCloud Control Center (C3)\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nc3                       | -                    | -                   | Cloud Control Center (C3)\n  ↳ c3-app               | Aggregator           | Python3             | Collectors + API\n  ↳ c3-db0               | Storage              | Only JSON           | Config + metrics storage\n\nA10) FRONT (User View)\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\ndashboard                | -                    | -                   | Main Dashboard &amp; Service Launcher\n  ↳ dashboard-app        | Homepage             | Homepage            | Service cards + status + widgets\n  ↳ dashboard-db0        | Storage              | YAML                | services.yaml, bookmarks.yaml\n\nA11) CONTROL CENTER (Operations)\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nmonitor                  | -                    | -                   | Health Monitoring\n  ↳ monitor-front        | Status Page          | Uptime Kuma (built-in)| Public status page + badges\n  ↳ monitor-app          | Health Checks        | Uptime Kuma         | Ping, HTTP, TCP, DNS checks\n  ↳ monitor-db0          | Database             | SQL:SQLite          | Incidents, heartbeats\n                         |                      |                     |\norchestrate              | -                    | -                   | Container Orchestration\n  ↳ orchestrate-app      | Stack Manager        | Dockge              | Docker Compose UI\n  ↳ orchestrate-db0      | Storage              | Filesystem          | Stack configs (compose files)\n                         |                      |                     |\nworkflows                | -                    | -                   | Workflow Automation Hub\n  ↳ workflows-front      | Selector UI          | SvelteKit 5 + SCSS  | Hub landing + workflow selector\n                         |                      |                     |\n  ├─ temporal            | -                    | -                   | Infrastructure Workflows\n  │    ↳ temporal-front  | Workflow UI          | Temporal UI (built-in)| Workflow dashboard\n  │    ↳ temporal-app    | Workflow Engine      | Temporal            | Workflow engine\n  │    ↳ temporal-db0    | Database             | SQL:PostgreSQL      | Workflow state, history\n                         |                      |                     |\n  └─ langgraph           | -                    | -                   | AI Agentic Workflows\n       ↳ langgraph-front | Agent Monitor        | SvelteKit 5 + SCSS  | Agent monitor UI\n       ↳ langgraph-app   | Agent Orchestrator   | LangGraph + FastAPI | Agent orchestration\n       ↳ langgraph-db0   | Database             | SQL:PostgreSQL      | Checkpoints, chat history\n       ↳ langgraph-vec   | Vector DB            | pgvector            | Vector embeddings\n       ↳ langgraph-gpu   | GPU Runtime          | Vast.ai / Lambda    | GPU compute runtime\n\nA12) DATA &amp; SAFETY (Security Layer)\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nbackup                   | -                    | -                   | Backup System\n  ↳ backup-app           | Backup Engine        | Borgmatic           | Deduplicating backups (Borg wrapper)\n  ↳ backup-db0           | Storage              | Filesystem          | Borg repos + borgmatic.yaml\n                         |                      |                     |\nsecurity                 | -                    | -                   | Active Security (Vulnerability Scan)\n  ↳ security-app         | Scanner              | Trivy               | Container image scanning\n  ↳ security-cron        | Scheduler            | Cron                | Daily scans → JSON reports\n\nA13) AUDIT CENTER\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nanalytics                | -                    | -                   | Web Analytics Platform\n  ↳ analytics-front      | Stats UI             | Matomo (built-in)   | Login + stats display\n  ↳ analytics-app        | Analytics Engine     | Matomo (PHP-FPM)    | Analytics processing\n  ↳ analytics-db0        | Database             | SQL:MariaDB         | Visits, events, reports\n                         |                      |                     |\naudit                    | -                    | -                   | Log Auditing (Passive Security)\n  ↳ audit-app            | Log Viewer           | Dozzle              | Real-time container logs\n\nDevs Security\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\nwebserver                | -                    | -                   | Central Proxy &amp; Web Serving\n  ↳ proxy-front          | Admin UI             | NPM (built-in)      | Login + NPM admin UI\n  ↳ proxy-app            | Reverse Proxy        | NPM (Nginx Proxy Manager)| Reverse proxy + SSL termination\n  ↳ proxy-db0            | Database             | SQL:SQLite          | Proxy configs + certs\n                         |                      |                     |\noauth2                   | -                    | -                   | GitHub OAuth2 Authentication\n  ↳ oauth2-front         | Login Page           | OAuth2-Proxy (built-in)| Login redirect page\n  ↳ oauth2-app           | OAuth Server         | OAuth2-Proxy        | OAuth2 proxy server\n  ↳ oauth2-db0           | Session Store        | Redis / Memory      | Session tokens\n                         |                      |                     |\nauthelia                 | -                    | -                   | 2FA / SSO Gateway\n  ↳ authelia-front       | Login UI             | Authelia (built-in) | Login + 2FA prompt\n  ↳ authelia-app         | Auth Server          | Authelia            | Auth server + session mgmt\n  ↳ authelia-db0         | Database             | SQL:PostgreSQL      | Users, sessions, TOTP seeds\n                         |                      |                     |\nvpn                      | -                    | -                   | VPN Server\n  ↳ vpn-front            | Client UI            | wg-easy (built-in)  | Web UI for client management\n  ↳ vpn-app              | VPN Server           | Wireguard           | VPN tunnel server\n  ↳ vpn-db0              | Storage              | Filesystem          | Client configs + keys\n\nDevs Infrastructure\nName                     | Component            | Stack               | Purpose\n─────────────────────────┼──────────────────────┼─────────────────────┼────────────────────────────────\napi                      | -                    | -                   | Central API Gateway\n  ↳ api-front            | API Docs             | SvelteKit 5 + SCSS  | API docs / Swagger UI\n  ↳ api-app              | API Server           | Python:Flask        | Flask API server\n  ↳ api-db0              | Storage              | Hybrid:JSON/SQLite  | Aggregated JSONs from all apps\n                         |                      |                     |\ncache                    | -                    | -                   | In-Memory Cache\n  ↳ cache-app            | Cache Server         | Redis               | Session/cache data store\n\nTech Definition\nDevOps Stack\nCategory             | Provider                 | Purpose\n─────────────────────┼──────────────────────────┼────────────────────────────────\nCode Repository      | GitHub                   | Version control, collaboration\nDatabase Host        | Oracle Cloud             | SQLite / MariaDB / PostgreSQL\nCI/CD Pipeline       | GitHub Actions           | Build, test, deploy automation\nWeb Hosting          | GitHub Pages             | Static site hosting (free)\nAnalytics            | Matomo (self-hosted)     | Privacy-focused web analytics\nDNS + CDN            | Cloudflare               | DNS, SSL, caching, DDoS protection\n\nSecurity Stack\nComponent            | Stack                    | Purpose\n─────────────────────┼──────────────────────────┼────────────────────────────────\nAuthelia             | Authelia + Redis         | 2FA Gateway, SSO, Session Mgmt\nOAuth2 Providers     | OAuth2-Proxy             | Social Login Integration\n  ↳ GitHub           | GitHub OAuth App         | Primary (dev-focused)\n  ↳ Google           | Google OAuth             | Backup option\n  ↳ Facebook         | Meta OAuth               | Future option\n  ↳ X (Twitter)      | X OAuth                  | Future option\n\nWebDevs Stack\nProject Type         | Stack                    | Output                  | Render\n─────────────────────┼──────────────────────────┼─────────────────────────┼────────────\n\n## Frontend (Browser)\nStatic Landing       | Vanilla HTML + CSS       | Single .html file       | None (static)\nService Fronts       | SvelteKit 5 + SCSS       | HTML + minimal JS       | SSR + Hydration\nCloud Dashboard      | SvelteKit 5 + SCSS       | HTML + JS chunks        | SSR + CSR\nGitHub Pages         | SvelteKit 5 (static)     | Pre-rendered HTML       | Static export\n\n## Templating (Python Backend)\nProject              | Stack              | Data Input     | Template         | Output\n─────────────────────┼────────────────────┼────────────────┼──────────────────┼──────────────────\nEmail Notifications  | Jinja2 + Python    | JSON/dict      | .html.j2         | .html (email)\nPDF Reports          | Jinja2 + WeasyPrint| JSON/dict      | .html.j2         | .pdf\nMarkdown Docs        | Jinja2 + Markdown  | JSON/dict      | .md.j2           | .md → .html\nConfig Files         | Jinja2             | JSON/dict      | .yaml.j2/.toml.j2| .yaml/.toml\nSpec Docs (ArchSpecs)| Jinja2             | .spec.json     | .md.j2           | .md\n\n\nA2) Infra Resources\nA20) Resource Allocation\nA200) Resource Estimation\nService              | RAM      | Storage   | GPU    | Bandwidth/mo | VM\n─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────\n\n## FRIDGE\n\nTerminals\n↳ terminal-app       | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1\n↳ ide-app            | 512 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1\n↳ ai-app             | 512 MB   | 2 GB      | -      | 30 GB        | oci-p-flex_1\n\nUser Productivity\n↳ mail-* (suite)     | 512 MB   | 10 GB     | -      | 5 GB         | oci-f-micro_1\n↳ calendar-app       | 64 MB    | 500 MB    | -      | 1 GB         | oci-p-flex_1\n↳ sync-front         | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1\n  ↳ drive (Rclone)   | 128 MB   | 2 GB      | -      | 200 GB       | oci-p-flex_1\n  ↳ git (Gitea)      | 256 MB   | 5 GB      | -      | 10 GB        | oci-p-flex_1\n↳ photo-app          | 256 MB   | 20 GB     | -      | 50 GB        | oci-p-flex_1\n↳ slides-app (Marp)  | 64 MB    | 200 MB    | -      | 2 GB         | oci-p-flex_1\n  ↳ slidev (Sli.dev) | 128 MB   | 500 MB    | -      | 5 GB         | oci-p-flex_1\n  ↳ reveal (Reveal.js)| 128 MB  | 500 MB    | -      | 5 GB         | oci-p-flex_1\n↳ sheets-app         | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1\n  ↳ pandas (Python)  | 256 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1\n  ↳ xsv (Rust)       | 64 MB    | 1 GB      | -      | 10 GB        | oci-p-flex_1\n↳ dashboards-app     | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1\n  ↳ jupyter          | 512 MB   | 2 GB      | -      | 10 GB        | oci-p-flex_1\n  ↳ dash (Plotly)    | 256 MB   | 1 GB      | -      | 10 GB        | oci-p-flex_1\n\nUser Security\n↳ vault-app          | 128 MB   | 500 MB    | -      | 1 GB         | oci-p-flex_1\n↳ vpn-app            | 64 MB    | 50 MB     | -      | 100 GB       | oci-p-flex_1\n\n─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────\nFRIDGE TOTALS        | 4.1 GB   | 49.6 GB   | -      | 483 GB       |\n\n## KITCHEN\n\nCloud Control Center (C3)\n↳ analytics-app      | 256 MB   | 5 GB      | -      | 100 GB       | oci-f-micro_2\n↳ c3-app             | 64 MB    | 100 MB    | -      | 5 GB         | oci-p-flex_1\n  ↳ dashboard        | 64 MB    | 50 MB     | -      | 10 GB        | oci-p-flex_1\n  ↳ monitor          | 64 MB    | 500 MB    | -      | 5 GB         | oci-p-flex_1\n  ↳ orchestrate      | 128 MB   | 100 MB    | -      | 5 GB         | oci-p-flex_1\n  ↳ backup           | 128 MB   | varies    | -      | 2 GB         | oci-p-flex_1\n  ↳ audit            | 32 MB    | -         | -      | 2 GB         | oci-p-flex_1\n  ↳ security         | 128 MB   | 1 GB      | -      | 2 GB         | oci-p-flex_1\n↳ workflows-app      | 64 MB    | 100 MB    | -      | 2 GB         | oci-p-flex_1\n  ↳ temporal         | 512 MB   | 2 GB      | -      | 20 GB        | oci-p-flex_1\n  ↳ langgraph        | 512 MB   | 2 GB      | -      | 30 GB        | oci-p-flex_1\n\nDevs Security\n↳ proxy-app          | 256 MB   | 1 GB      | -      | 50 GB        | gcp-f-micro_1\n↳ authelia-app       | 128 MB   | 100 MB    | -      | 10 GB        | gcp-f-micro_1\n↳ oauth2-app         | 64 MB    | 50 MB     | -      | 5 GB         | gcp-f-micro_1\n\nDevs Infrastructure\n↳ api-app            | 128 MB   | 1 GB      | -      | 20 GB        | gcp-f-micro_1\n↳ cache-app          | 256 MB   | 1 GB      | -      | -            | oci-p-flex_1\n\n─────────────────────┼──────────┼───────────┼────────┼──────────────┼────────────────\nKITCHEN TOTALS       | 2.4 GB   | 12.9 GB   | -      | 257 GB       |\n\n═════════════════════╪══════════╪═══════════╪════════╪══════════════╪════════════════\nGRAND TOTALS         | 6.5 GB   | 62.5 GB   | -      | 740 GB       |\n\nA201) VM Capacity &amp; Headroom\nHost       | VM             | RAM    | Alloc  | HD     | Alloc  | Headroom | Services Running\n───────────┼────────────────┼────────┼────────┼────────┼────────┼──────────┼─────────────────────────────────────────\nGCloud     | gcp-f-micro_1  | 1 GB   | 576 MB | 30 GB  | 2.2 GB | 42% RAM  | proxy, authelia, oauth2, api, flask\nOracle     | oci-f-micro_1  | 1 GB   | 512 MB | 47 GB  | 10 GB  | 49% RAM  | mail-* (8 containers)\nOracle     | oci-f-micro_2  | 1 GB   | 256 MB | 47 GB  | 5 GB   | 74% RAM  | analytics\nOracle     | oci-p-flex_1   | 8 GB   | 5.1 GB | 100 GB | 45 GB  | 36% RAM  | sync, drive, git, photos, vault, vpn, cal, slides, sheets, dashboards, cloud-portal, workflows, cache\n───────────┼────────────────┼────────┼────────┼────────┼────────┼──────────┼─────────────────────────────────────────\nTOTALS     |                | 11 GB  | 6.4 GB | 224 GB | 62 GB  | 42% RAM  |\n\nA202) Cost Estimation\nItem                   | Provider   | Monthly Cost  | Notes\n───────────────────────┼────────────┼───────────────┼─────────────────────────────\ngcp-f-micro_1          | GCloud     | $0            | Free Tier (e2-micro)\noci-f-micro_1          | Oracle     | $0            | Free Tier (Always Free)\noci-f-micro_2          | Oracle     | $0            | Free Tier (Always Free)\noci-p-flex_1           | Oracle     | ~$5.50        | Flex (wake-on-demand)\nCloudflare             | Cloudflare | $0            | Free Plan (DNS + CDN)\nDomain (annual/12)     | Cloudflare | ~$1           | ~$10/year\n───────────────────────┼────────────┼───────────────┼─────────────────────────────\nTOTAL                  |            | ~$6.50/mo     | Cloud infrastructure\n\nA203) URL/Port Proxied\nURL Pattern: service.diegonmarcos.com = Login/Landing → redirects to /app after auth success\nServices:\nService           | URL (Public and Private AUTH)                   | VM             | Container        | Private | IP:Port\n──────────────────┼─────────────────────────────────────────────────┼────────────────┼──────────────────┼─────────┼─────────────────────\n## FRIDGE\n\nTerminals\n↳ Terminals Hub   | terminal.diegonmarcos.com                       | oci-p-flex_1   | terminals-front  | -       | 84.235.234.87:3000\n  ↳ WebTerminal   | terminal.diegonmarcos.com/terminal              | oci-p-flex_1   | terminal-app     | x       | 84.235.234.87:7681\n  ↳ IDE           | terminal.diegonmarcos.com/ide                   | oci-p-flex_1   | ide-app          | x       | 84.235.234.87:8080\n  ↳ AI Chat       | terminal.diegonmarcos.com/chat                  | oci-p-flex_1   | ai-app           | x       | 84.235.234.87:8501\n\nUser Productivity\n↳ Mail            | mail.diegonmarcos.com                           | oci-f-micro_1  | mail-front       | -       | 130.110.251.193:443\n  ↳ Webmail       | mail.diegonmarcos.com/webmail                   | oci-f-micro_1  | mail-webmail     | x       | 130.110.251.193:443\n↳ Calendar        | cal.diegonmarcos.com                            | oci-p-flex_1   | calendar-front   | -       | 84.235.234.87:5232\n  ↳ Radicale      | cal.diegonmarcos.com/radicale                   | oci-p-flex_1   | calendar-app     | x       | 84.235.234.87:5232\n↳ Sync            | sync.diegonmarcos.com                           | oci-p-flex_1   | sync-front       | -       | 84.235.234.87:8384\n  ↳ Drive         | sync.diegonmarcos.com/drive                     | oci-p-flex_1   | drive-app        | x       | 84.235.234.87:5572\n  ↳ Git           | sync.diegonmarcos.com/git                       | oci-p-flex_1   | git-app          | x       | 84.235.234.87:3001\n↳ Photos          | photos.diegonmarcos.com                         | oci-p-flex_1   | photo-front      | -       | 84.235.234.87:2342\n  ↳ Photoprism    | photos.diegonmarcos.com/photoprism              | oci-p-flex_1   | photo-app        | x       | 84.235.234.87:2342\n↳ Slides          | slides.diegonmarcos.com                         | oci-p-flex_1   | slides-front     | -       | 84.235.234.87:3002\n  ↳ Slidev        | slides.diegonmarcos.com/slidev                  | oci-p-flex_1   | slidev-app       | x       | 84.235.234.87:3030\n  ↳ Reveal        | slides.diegonmarcos.com/reveal                  | oci-p-flex_1   | reveal-app       | x       | 84.235.234.87:3031\n↳ Sheets          | sheets.diegonmarcos.com                         | oci-p-flex_1   | sheets-front     | -       | 84.235.234.87:3003\n  ↳ Pandas        | sheets.diegonmarcos.com/pandas                  | oci-p-flex_1   | pandas-app       | x       | 84.235.234.87:8502\n  ↳ XSV           | sheets.diegonmarcos.com/xsv                     | oci-p-flex_1   | xsv-app          | x       | 84.235.234.87:8503\n↳ Dashboards      | dashboards.diegonmarcos.com                     | oci-p-flex_1   | dashboards-front | -       | 84.235.234.87:3004\n  ↳ Jupyter       | dashboards.diegonmarcos.com/jupyter             | oci-p-flex_1   | jupyter-app      | x       | 84.235.234.87:8888\n  ↳ Dash          | dashboards.diegonmarcos.com/dash                | oci-p-flex_1   | dash-app         | x       | 84.235.234.87:8050\n\nUser Security\n↳ Vault           | vault.diegonmarcos.com                          | oci-p-flex_1   | vault-front      | -       | 84.235.234.87:8080\n  ↳ Vaultwarden   | vault.diegonmarcos.com/vaultwarden              | oci-p-flex_1   | vault-app        | x       | 84.235.234.87:8080\n↳ VPN             | vpn.diegonmarcos.com                            | oci-p-flex_1   | vpn-front        | -       | 84.235.234.87:51821\n  ↳ WG-Easy       | vpn.diegonmarcos.com/wg-easy                    | oci-p-flex_1   | vpn-app          | x       | 84.235.234.87:51820\n\n## KITCHEN\n\nCloud Control Center (C3)\n↳ Analytics       | analytics.diegonmarcos.com                      | oci-f-micro_2  | analytics-front  | -       | 129.151.228.66:8080\n  ↳ Matomo        | analytics.diegonmarcos.com/matomo               | oci-f-micro_2  | analytics-app    | x       | 129.151.228.66:8080\n↳ Dashboard       | cloud.diegonmarcos.com                          | oci-p-flex_1   | dashboard-app    | -       | 84.235.234.87:3000\n  ↳ Homepage      | cloud.diegonmarcos.com                          | oci-p-flex_1   | homepage         | -       | 84.235.234.87:3000\n↳ Monitor         | status.diegonmarcos.com                         | oci-p-flex_1   | monitor-app      | -       | 84.235.234.87:3001\n  ↳ Uptime Kuma   | status.diegonmarcos.com                         | oci-p-flex_1   | uptime-kuma      | x       | 84.235.234.87:3001\n↳ Orchestrate     | dockge.diegonmarcos.com                         | oci-p-flex_1   | orchestrate-app  | x       | 84.235.234.87:5001\n  ↳ Dockge        | dockge.diegonmarcos.com                         | oci-p-flex_1   | dockge           | x       | 84.235.234.87:5001\n↳ Audit           | logs.diegonmarcos.com                           | oci-p-flex_1   | audit-app        | x       | 84.235.234.87:9999\n  ↳ Dozzle        | logs.diegonmarcos.com                           | oci-p-flex_1   | dozzle           | x       | 84.235.234.87:9999\n↳ Workflows       | workflow.diegonmarcos.com                       | oci-p-flex_1   | workflows-front  | -       | 84.235.234.87:3006\n  ↳ Temporal      | workflow.diegonmarcos.com/temporal              | oci-p-flex_1   | temporal-app     | x       | 84.235.234.87:8233\n  ↳ LangGraph     | workflow.diegonmarcos.com/langgraph             | oci-p-flex_1   | langgraph-app    | x       | 84.235.234.87:8123\n\nDevs Security\n↳ Proxy Admin     | proxy.diegonmarcos.com                          | gcp-f-micro_1  | proxy-front      | -       | 34.55.55.234:81\n  ↳ NPM           | proxy.diegonmarcos.com/npm                      | gcp-f-micro_1  | proxy-app        | x       | 34.55.55.234:81\n↳ Auth (Authelia) | auth.diegonmarcos.com                           | gcp-f-micro_1  | authelia-front   | -       | 34.55.55.234:9091\n  ↳ Authelia      | auth.diegonmarcos.com/authelia                  | gcp-f-micro_1  | authelia-app     | -       | 34.55.55.234:9091\n↳ OAuth2          | auth.diegonmarcos.com/oauth2                    | gcp-f-micro_1  | oauth2-app       | -       | 34.55.55.234:4180\n\nDevs Infrastructure\n↳ API Gateway     | api.diegonmarcos.com                            | oci-p-flex_1   | api-front        | -       | 84.235.234.87:5000\n  ↳ Docs          | api.diegonmarcos.com/docs                       | oci-p-flex_1   | api-app          | x       | 84.235.234.87:5000\n↳ Cache           | (internal)                                      | oci-p-flex_1   | cache-app        | -       | 84.235.234.87:6379\n\nVMs:\nHost       | VM Name        | IP              | Host SSH                                      | VM SSH\n───────────┼────────────────┼─────────────────┼───────────────────────────────────────────────┼──────────────────────────────\nGCloud     | gcp-f-micro_1  | 34.55.55.234    | gcloud compute ssh arch-1 --zone=us-central1-a | -\nOracle     | oci-f-micro_1  | 130.110.251.193 | -                                             | ssh ubuntu@130.110.251.193\nOracle     | oci-f-micro_2  | 129.151.228.66  | -                                             | ssh ubuntu@129.151.228.66\nOracle     | oci-p-flex_1   | 84.235.234.87   | -                                             | ssh ubuntu@84.235.234.87\n\nA21) Maps &amp; Topology\nNetwork Topology\n                                    INTERNET\n                                       │\n                                       ▼\n                          ┌────────────────────────┐\n                          │      CLOUDFLARE        │\n                          │   DNS + CDN + Proxy    │\n                          │   diegonmarcos.com     │\n                          └───────────┬────────────┘\n                                      │\n                    ┌─────────────────┼─────────────────┐\n                    │                 │                 │\n                    ▼                 ▼                 ▼\n┌───────────────────────────────────────────────────────────────────────────────┐\n│                              GOOGLE CLOUD                                      │\n│  ┌─────────────────────────────────────────────────────────────────────────┐  │\n│  │  gcp-f-micro_1 (us-central1-a)              34.55.55.234                │  │\n│  │  e2-micro | 1 GB RAM | 30 GB | FREE 24/7                                │  │\n│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐          │  │\n│  │  │  NPM :80/:443   │  │ Authelia :9091  │  │  Flask API      │          │  │\n│  │  │  Reverse Proxy  │  │  2FA Gateway    │  │  :5000          │          │  │\n│  │  └────────┬────────┘  └────────┬────────┘  └─────────────────┘          │  │\n│  │           │                    │                                         │  │\n│  │           └────────────────────┘                                         │  │\n│  │                    │ Forward Auth                                        │  │\n│  └────────────────────┼─────────────────────────────────────────────────────┘  │\n└───────────────────────┼────────────────────────────────────────────────────────┘\n                        │\n        ┌───────────────┼───────────────┬───────────────┐\n        │               │               │               │\n        ▼               ▼               ▼               ▼\n┌─────────────────────────────────────────────────────────────────────────────────┐\n│                                 ORACLE CLOUD                                     │\n│                                                                                  │\n│  ┌────────────────────────┐  ┌────────────────────────┐                         │\n│  │  oci-f-micro_1         │  │  oci-f-micro_2         │                         │\n│  │  130.110.251.193       │  │  129.151.228.66        │                         │\n│  │  1 GB | 47 GB          │  │  1 GB | 47 GB          │                         │\n│  │  FREE 24/7             │  │  FREE 24/7             │                         │\n│  │  ─────────────────     │  │  ─────────────────     │                         │\n│  │  • mail-* (8 cont)     │  │  • analytics (Matomo)  │                         │\n│  │    - IMAP/SMTP         │  │    - PHP-FPM           │                         │\n│  │    - Webmail           │  │    - MariaDB           │                         │\n│  │    - Admin             │  │                        │                         │\n│  └────────────────────────┘  └────────────────────────┘                         │\n│                                                                                  │\n│  ┌──────────────────────────────────────────────────────────────────────────┐   │\n│  │  oci-p-flex_1 (eu-frankfurt-1)                      84.235.234.87        │   │\n│  │  A1.Flex | 8 GB RAM | 100 GB | PAID (wake-on-demand) ~$5.50/mo           │   │\n│  │  ────────────────────────────────────────────────────────────────────    │   │\n│  │  FRIDGE (Solutions)                  │  KITCHEN (C3 Control Center)      │   │\n│  │  • terminal, ide, ai-chat            │  • 01 Homepage (dashboard)        │   │\n│  │  • sync, drive (Rclone), git (Gitea) │  • 10 Uptime Kuma (monitor)       │   │\n│  │  • photos (Photoprism), calendar     │  • 11 Dockge (orchestrate)        │   │\n│  │  • slides (Marp/Slidev/Reveal)       │  • 20 Borgmatic (backup)          │   │\n│  │  • sheets (Pandas/XSV)               │  • 21 Dozzle (audit)              │   │\n│  │  • dashboards (Jupyter/Dash)         │  • 22 Trivy (security)            │   │\n│  │  • vault (Vaultwarden), vpn (WG)     │  • cache (Redis)                  │   │\n│  └──────────────────────────────────────────────────────────────────────────┘   │\n│                                                                                  │\n└──────────────────────────────────────────────────────────────────────────────────┘\n\nAuth Flow\nUser Request → Cloudflare → NPM (gcp-f-micro_1)\n                              │\n                              ▼\n                      ┌───────────────┐\n                      │   Authelia    │\n                      │   2FA Check   │\n                      └───────┬───────┘\n                              │\n            ┌─────────────────┼─────────────────┐\n            ▼                 ▼                 ▼\n      ┌──────────┐      ┌──────────┐      ┌──────────┐\n      │  GitHub  │      │   TOTP   │      │ Passkey  │\n      │  OAuth2  │      │  (Local) │      │ WebAuthn │\n      └────┬─────┘      └────┬─────┘      └────┬─────┘\n           └─────────────────┼─────────────────┘\n                             ▼\n                   Session Cookie Created\n                   (.diegonmarcos.com)\n                             │\n                             ▼\n                   Access Granted → Backend VM\n\nA22) Costs\n┌─────────────────────────────────────────────────────────────────┐\n│  MONTHLY COSTS                                                   │\n├─────────────────────────────────────────────────────────────────┤\n│  GCloud gcp-f-micro_1      │  FREE        │  24/7 gateway       │\n│  Oracle oci-f-micro_1      │  FREE        │  24/7 mail          │\n│  Oracle oci-f-micro_2      │  FREE        │  24/7 analytics     │\n│  Oracle oci-p-flex_1       │  ~$5.50      │  wake-on-demand     │\n│  Cloudflare                │  FREE        │  DNS + CDN          │\n│  Domain                    │  ~$1         │  annual/12          │\n├─────────────────────────────────────────────────────────────────┤\n│  TOTAL CLOUD               │  ~$6.50/mo   │                     │\n└─────────────────────────────────────────────────────────────────┘\n\n\nA3) Tech Research\nFramework Comparison (Frontend)\nCriteria        | Vanilla (HTML+CSS+JS)    | Vue3 + Nuxt3 (SSR)       | SvelteKit 5 (SSR)\n────────────────┼──────────────────────────┼──────────────────────────┼──────────────────────────\nSEO             | ★★★★★ Excellent          | ★★★★★ Excellent (SSR)    | ★★★★★ Excellent (SSR)\nPerformance     | ★★★★★ Best (no overhead) | ★★★★☆ Good (Vue runtime) | ★★★★★ Excellent (compiles)\nComplexity      | ★☆☆☆☆ Hard at scale      | ★★★☆☆ Medium             | ★★★★☆ Low-Medium\nConsistency     | ★☆☆☆☆ No patterns        | ★★★★☆ Good (SFC)         | ★★★★★ Opinionated\nBundle Size     | 0 KB (no framework)      | ~50 KB (Vue runtime)     | ~5 KB (compiles away)\nLearning Curve  | Low (basics)             | Medium-High              | Low-Medium\nSSR Support     | Manual only              | Built-in (Nuxt3)         | Built-in\nStatic Export   | Native                   | Built-in (Nuxt3)         | Built-in\n\nFramework Comparison (Templating - Python/JS Backend)\nCriteria        | Jinja2 (Python)          | Mako (Python)            | Handlebars (JS)\n────────────────┼──────────────────────────┼──────────────────────────┼──────────────────────────\nPerformance     | ★★★★☆ Fast               | ★★★★★ Fastest            | ★★★★☆ Fast\nSyntax          | ★★★★★ Clean {{ }}        | ★★★☆☆ ${} + Python       | ★★★★☆ Clean {{ }}\nLogic Support   | ★★★★★ Full (loops, if)   | ★★★★★ Full + Python      | ★★☆☆☆ Logic-less\nLearning Curve  | ★★★★★ Easy               | ★★★☆☆ Medium             | ★★★★★ Easy\nEcosystem       | ★★★★★ Flask, Ansible     | ★★★☆☆ SQLAlchemy         | ★★★★☆ Node.js, Mustache\nInheritance     | ★★★★★ Extends + Blocks   | ★★★★★ Extends + Blocks   | ★★★☆☆ Partials only\nDebug           | ★★★★★ Clear errors       | ★★★☆☆ Verbose            | ★★★★☆ Good\n\nWhen to Use\nUse Case             | Best Choice              | Why\n─────────────────────┼──────────────────────────┼────────────────────────────────────────\n\n## Static / SEO Pages (minimal JS, SEO-first, some dynamic)\n - Landing pages        | Vanilla or SvelteKit     | SEO matters, minimal JS needed\n - Login/Auth pages     | Vanilla                  | Simple forms, no framework needed\n - Dashboards           | SvelteKit                | Reactive data, SSR for initial load\n\n## Documentation (Markdown → HTML, Obsidian-like workflow)\n - Docs / Knowledge Base| SvelteKit (static)       | Markdown support, fast builds\n - API Docs             | SvelteKit + OpenAPI      | Auto-generated from specs\n\n## Web Apps (interactive, component-based)\n - Data Apps            | SvelteKit or Nuxt3       | Forms, lists, CRUD operations\n - Media Apps           | SvelteKit or Nuxt3       | Maps, music, photos, video players\n - Games                | Vanilla + Phaser/Three.js| Direct Canvas/WebGL, no overhead\n\n## MVPs / Prototypes (fast iteration, throwaway code)\n - Quick prototypes     | Vue3 + Vite              | Fast HMR, familiar syntax\n - Hackathons           | Vue3 + Vite              | Speed over architecture\n\n## Server-Side Templating (Python backend, no JS)\n - Email templates      | Jinja2                   | Dynamic emails from Python\n - PDF/HTML reports     | Jinja2                   | Generate from data + template\n - Config generation    | Jinja2                   | YAML/JSON/TOML from templates\n - Batch HTML pages     | Jinja2                   | Bulk generate static pages\n - Flask views          | Jinja2                   | Server-rendered HTML (no SPA)\n\n\nA4) Today (Current State)\nby Service\nService           | Public URL                      | VM             | Container       | IP:Port             | Status\n──────────────────┼─────────────────────────────────┼────────────────┼─────────────────┼─────────────────────┼────────\n\n## FRIDGE\n\nTerminals\n↳ WebTerminal     | terminal.diegonmarcos.com       | oci-p-flex_1   | terminal-app    | 84.235.234.87:7681  | dev\n\nUser Productivity\n↳ Mail            | mail.diegonmarcos.com           | oci-f-micro_1  | mailu-front     | 130.110.251.193:443 | on\n↳ Sync            | sync.diegonmarcos.com           | oci-p-flex_1   | sync-app        | 84.235.234.87:8384  | on\n↳ Git             | git.diegonmarcos.com            | oci-p-flex_1   | git-app         | 84.235.234.87:3000  | dev\n↳ Photos          | photos.diegonmarcos.com         | oci-p-flex_1   | photoprism-app  | 84.235.234.87:2342  | on\n↳ Calendar        | cal.diegonmarcos.com            | oci-p-flex_1   | radicale-app    | 84.235.234.87:5232  | on\n\nUser Security\n↳ Vault           | vault.diegonmarcos.com          | oci-p-flex_1   | vault-app       | 84.235.234.87:80    | dev\n↳ VPN (OpenVPN)   | (UDP direct)                    | oci-p-flex_1   | vpn-app         | 84.235.234.87:1194  | dev\n\n## KITCHEN\n\nCloud Control Center (C3)\n↳ Analytics       | analytics.diegonmarcos.com      | oci-f-micro_2  | matomo-app      | 129.151.228.66:8080 | on\n↳ Cloud Dashboard | cloud.diegonmarcos.com          | squarespace    | (external)      | 198.49.23.144       | on\n↳ Flask API       | (internal)                      | gcp-f-micro_1  | flask-app       | 34.55.55.234:5000   | on\n↳ n8n Infra       | n8n.diegonmarcos.com            | oci-p-flex_1   | n8n-infra-app   | 84.235.234.87:5678  | on\n\nDevs Security\n↳ Proxy Admin     | proxy.diegonmarcos.com          | gcp-f-micro_1  | npm-gcloud      | 34.55.55.234:81     | on\n↳ Auth (Authelia) | auth.diegonmarcos.com           | gcp-f-micro_1  | authelia-app    | 34.55.55.234:9091   | on\n↳ Authelia Redis  | (internal)                      | gcp-f-micro_1  | authelia-redis  | 34.55.55.234:6379   | on\n\nDevs Infrastructure\n↳ Cache           | (internal)                      | oci-p-flex_1   | cache-app       | 84.235.234.87:6379  | on\n\nby VM\nHost   | VM             | RAM   | VRAM | Storage | IP              | Services Running                          | Notes\n───────┼────────────────┼───────┼──────┼─────────┼─────────────────┼───────────────────────────────────────────┼─────────────────\nGCloud | gcp-f-micro_1  | 1 GB  | -    | 30 GB   | 34.55.55.234    | npm, authelia, redis, flask-app           | 24/7 FREE\nOracle | oci-f-micro_1  | 1 GB  | -    | 47 GB   | 130.110.251.193 | mailu-* (8 containers)                    | 24/7 FREE\nOracle | oci-f-micro_2  | 1 GB  | -    | 47 GB   | 129.151.228.66  | matomo-app, matomo-db                     | 24/7 FREE\nOracle | oci-p-flex_1   | 8 GB  | -    | 100 GB  | 84.235.234.87   | sync, photos, n8n, git, cal, cache...     | WAKE $5.5/mo\n\n\n\n\n\nB) Architecture - Technical Deep Dives\nB1) Security Architecture\nB11) Web Auth - Dual Authentication\nPlan: 0.spec/Task_Security2faOAuth20/PLAN_DualAuth_Security.md\n┌─────────────────────────────────────────────────────────────────┐\n│                         DUAL AUTH FLOW                           │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  User Request → NPM → auth_request → Authelia                   │\n│                                          │                      │\n│                          ┌───────────────┼───────────────┐      │\n│                          │               │               │      │\n│                          ▼               ▼               ▼      │\n│                    ┌──────────┐   ┌──────────┐   ┌──────────┐  │\n│                    │  GitHub  │   │   TOTP   │   │ Passkey  │  │\n│                    │  OAuth2  │   │  (Local) │   │ (WebAuthn)│  │\n│                    └────┬─────┘   └────┬─────┘   └────┬─────┘  │\n│                         │              │              │         │\n│                         └──────────────┴──────────────┘         │\n│                                        │                        │\n│                                        ▼                        │\n│                              Session Cookie Created             │\n│                              (.diegonmarcos.com)                │\n│                                        │                        │\n│                                        ▼                        │\n│                              Access Granted to Service          │\n└─────────────────────────────────────────────────────────────────┘\n\nAuthentication Paths (Either grants access):\n\nPath 1: GitHub OAuth2 - Passwordless, uses GitHub’s 2FA\nPath 2: Local TOTP - Authelia internal user + TOTP app\nPath 3: Passkey/WebAuthn - Hardware key or biometric\n\nKey Components:\n\nAuthelia on GCP VM (central gateway)\nNPM forward auth for all services\nSSO via session cookie (domain: .diegonmarcos.com)\n\n\nB12) Dev Access - SSH &amp; Vault Management\nSecrets Storage Tiers:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTierLocationPurposeAccess MethodLOCAL_KEYS/home/diego/Documents/Git/LOCAL_KEYS/SSH keys, API tokens, infra credsTerminal/CLIBitwardenCloud (bitwarden.com)Browser passwords, TOTP seedsBrowser extensionVaultwardenvault.diegonmarcos.comFull backup, privacy-sensitiveSelf-hosted web\nSSH Access Configuration:\n# LOCAL_KEYS structure\nLOCAL_KEYS/\n├── 00_terminal/\n│   └── ssh/\n│       ├── id_rsa              # Default key\n│       ├── gcp_arch1           # GCloud VM\n│       └── oci_*               # Oracle VMs\n├── README.md                   # All credentials reference\n└── ...\n \n# Symlinked to ~/.ssh/\n~/.ssh/ → LOCAL_KEYS/00_terminal/ssh/\nVM Access Commands:\n# GCP (NPM + Authelia)\ngcloud compute ssh arch-1 --zone=us-central1-a\n \n# Oracle VMs\nssh -i ~/.ssh/id_rsa ubuntu@130.110.251.193  # Mail\nssh -i ~/.ssh/id_rsa ubuntu@129.151.228.66   # Analytics\nssh -i ~/.ssh/id_rsa ubuntu@84.235.234.87    # Dev (p-flex)\nVault Workflow:\n\nDaily use: Bitwarden Cloud (browser extension)\nSensitive items: Vaultwarden (self-hosted, Authelia protected)\nInfra credentials: LOCAL_KEYS/README.md (terminal reference)\n\n\nB13) Isolation - Network Segmentation &amp; Hardening\nDefense Layers:\n┌─────────────────────────────────────────────────────────────────┐\n│                      SECURITY LAYERS                             │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  LAYER 1: Network Edge                                          │\n│  ├── Cloudflare Proxy (DDoS, WAF)                              │\n│  └── UFW Firewall (allow only 80, 443, 22)                     │\n│                                                                 │\n│  LAYER 2: Reverse Proxy                                         │\n│  ├── NGINX Security Headers                                     │\n│  │   ├── X-Frame-Options: DENY                                 │\n│  │   ├── X-Content-Type-Options: nosniff                       │\n│  │   ├── Content-Security-Policy                               │\n│  │   └── Strict-Transport-Security                             │\n│  └── NPM Forward Auth → Authelia                               │\n│                                                                 │\n│  LAYER 3: Network Isolation                                     │\n│  ├── Wireguard VPN (inter-VM traffic)                          │\n│  ├── Docker Network (bridge isolation)                         │\n│  └── No exposed ports (internal only)                          │\n│                                                                 │\n│  LAYER 4: Container Security                                    │\n│  ├── Docker Compose: no &quot;ports:&quot; (use networks)                │\n│  ├── Read-only containers where possible                       │\n│  └── Non-root user in containers                               │\n│                                                                 │\n└─────────────────────────────────────────────────────────────────┘\n\nUFW Rules (per VM):\n# Default deny\nufw default deny incoming\nufw default allow outgoing\n \n# Allow SSH (restrict to known IPs if possible)\nufw allow 22/tcp\n \n# Allow HTTP/HTTPS (only on proxy VM)\nufw allow 80/tcp\nufw allow 443/tcp\n \n# Wireguard (inter-VM)\nufw allow 51820/udp\nDocker Compose Pattern (no exposed ports):\n# SECURE: Internal network only\nservices:\n  app:\n    networks:\n      - internal\n    # NO &quot;ports:&quot; section - accessed via reverse proxy\n \nnetworks:\n  internal:\n    driver: bridge\nNGINX Security Headers:\n# Add to NPM Advanced config\nadd_header X-Frame-Options &quot;SAMEORIGIN&quot; always;\nadd_header X-Content-Type-Options &quot;nosniff&quot; always;\nadd_header X-XSS-Protection &quot;1; mode=block&quot; always;\nadd_header Referrer-Policy &quot;strict-origin-when-cross-origin&quot; always;\nadd_header Permissions-Policy &quot;geolocation=(), microphone=(), camera=()&quot; always;\n\nB2) Service Architecture\nB21) Containers - Docker Compose Patterns\nStandard Service Pattern:\n# Pattern: service-name/docker-compose.yml\nversion: &quot;3.8&quot;\nservices:\n  app:\n    image: ${SERVICE_IMAGE}\n    container_name: ${SERVICE_NAME}-app\n    restart: unless-stopped\n    networks:\n      - internal\n      - proxy\n    volumes:\n      - ./data:/data\n    environment:\n      - TZ=Europe/Berlin\n    labels:\n      - &quot;com.centurylinklabs.watchtower.enable=true&quot;\n \nnetworks:\n  internal:\n    driver: bridge\n  proxy:\n    external: true\n    name: npm_network\nMulti-Container Service Pattern:\n# Pattern: service with frontend + backend + database\nservices:\n  front:\n    build: ./frontend\n    depends_on: [app]\n \n  app:\n    image: ${APP_IMAGE}\n    depends_on: [db]\n    environment:\n      - DATABASE_URL=postgresql://db:5432/${DB_NAME}\n \n  db:\n    image: postgres:15-alpine\n    volumes:\n      - db_data:/var/lib/postgresql/data\n \nvolumes:\n  db_data:\n\nB22) Databases - Schemas &amp; Migrations\nDatabase Distribution:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nServiceDatabaseLocationBackup Strategymail-*Maildiroci-f-micro_1Syncthing → localanalyticsMariaDBoci-f-micro_2Daily SQL dumpautheliaPostgreSQLgcp-f-micro_1Persistent volumegitSQLiteoci-p-flex_1File backupphotosSQLiteoci-p-flex_1File backupworkflowsPostgreSQLoci-p-flex_1Daily SQL dump\nMigration Strategy:\n\nSchema changes via numbered migration files\nBackup before migration\nTest in dev environment first\nRollback plan documented\n\n\nB23) APIs - Contracts &amp; Versioning\nAPI Standards:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAspectStandardFormatREST + JSONAuthBearer token (from Authelia session)VersioningURL prefix /api/v1/DocsOpenAPI 3.0 specErrorsRFC 7807 Problem Details\nCentral API Gateway (api.diegonmarcos.com):\n/api/v1/\n├── /services      # Service catalog\n├── /metrics       # Monitoring data\n├── /health        # Health checks\n└── /auth          # Auth status\n\n\nB3) Infrastructure Architecture\nB31) Networking - DNS, SSL, Reverse Proxy\nDNS Configuration (Cloudflare):\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRecordTypeTargetProxy@A34.55.55.234Yes*CNAME@YesmailA130.110.251.193No (direct)\nSSL Strategy:\n\nCloudflare Origin certificates (15 years)\nNPM manages Let’s Encrypt for non-proxied\nForce HTTPS everywhere\n\nReverse Proxy Rules (NPM):\n*.diegonmarcos.com → NPM (34.55.55.234)\n  ├── Forward Auth → Authelia (9091)\n  └── Proxy to backend VM:port\n\n\nB32) Storage - Volumes &amp; Backups\nVolume Strategy:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTypeMountBackupConfig./config:/configGit repoData./data:/dataSyncthingDatabaseNamed volumeSQL dumpLogs/var/logRotate + archive\nBackup Schedule:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTargetFrequencyRetentionMethodConfigsOn changeForeverGit pushUser dataReal-time30 daysSyncthingDatabasesDaily 3AM7 dayspg_dump/mysqldumpFull VMWeekly4 weeksCloud snapshot\n\nB33) Scaling - Wake-on-Demand &amp; GPU\nWake-on-Demand (oci-p-flex_1):\nRequest → NPM → Check if VM running\n                    │\n        ┌───────────┴───────────┐\n        │ Running               │ Stopped\n        ▼                       ▼\n   Forward to VM          Wake VM via OCI API\n                               │\n                          Wait for ready\n                               │\n                          Forward request\n\nGPU Provisioning (TensorDock/Vast.ai):\n# On-demand GPU workflow\n1. Request GPU workload\n2. Provision cheapest available GPU VM\n3. Pull model/data from cloud storage\n4. Execute workload\n5. Push results to cloud storage\n6. Terminate GPU VM\n\nC) Roadmap - Planning &amp; Prioritization\nC1) Phases - Implementation Milestones\nPhase 1: Security Foundation (PRIORITY)\nStatus: In Progress\nDependencies: None\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStepTaskStatus1.1Deploy Authelia on GCP VMDone1.2Configure GitHub OAuth AppDone1.3Setup NPM forward authDone1.4Test dual auth flow (GitHub + TOTP)In Progress1.5Document credentials in LOCAL_KEYSIn Progress\nPhase 2: Core Services\nStatus: Planned\nDependencies: Phase 1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStepTaskStatus2.1Mail (Mailu) deploymentDone2.2Sync (Syncthing) deploymentDone2.3Analytics (Matomo) deploymentDone2.4Vault (Vaultwarden) deploymentPlanned2.5Photos (Photoprism) deploymentIn Progress\nPhase 3: DevOps Infrastructure\nStatus: Planned\nDependencies: Phase 1, Phase 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStepTaskStatus3.1Monitoring collectors (Python)Planned3.2Flask API endpointsPlanned3.3Cloud Portal (SvelteKit)Planned3.4Architecture Specs systemPlanned\nPhase 4: Advanced Services\nStatus: Future\nDependencies: Phase 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStepTaskStatus4.1Terminals (ttyd, code-server)Future4.2Workflows (Temporal, LangGraph)Future4.3AI Chat integrationFuture\n\nC2) Dependencies - Service Graph\n┌─────────────────────────────────────────────────────────────────────┐\n│                      SERVICE DEPENDENCY GRAPH                         │\n├─────────────────────────────────────────────────────────────────────┤\n│                                                                     │\n│  LAYER 0: INFRASTRUCTURE (must be first)                            │\n│  ┌─────────┐  ┌─────────┐  ┌─────────┐                             │\n│  │   NPM   │  │Authelia │  │  Redis  │                             │\n│  │ (proxy) │→ │  (auth) │→ │ (cache) │                             │\n│  └────┬────┘  └────┬────┘  └─────────┘                             │\n│       │            │                                                │\n│  LAYER 1: CORE SERVICES (24/7)                                      │\n│       ▼            ▼                                                │\n│  ┌─────────┐  ┌─────────┐  ┌─────────┐                             │\n│  │  Mail   │  │Analytics│  │Flask API│                             │\n│  └─────────┘  └─────────┘  └────┬────┘                             │\n│                                 │                                   │\n│  LAYER 2: ON-DEMAND SERVICES                                        │\n│                                 ▼                                   │\n│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐               │\n│  │  Sync   │  │ Photos  │  │  Vault  │  │   Git   │               │\n│  └─────────┘  └─────────┘  └─────────┘  └─────────┘               │\n│                                                                     │\n│  LAYER 3: PORTAL &amp; MONITORING                                       │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  Cloud Portal (depends on: Flask API, all services)          │   │\n│  │  Monitoring (depends on: all VMs running collectors)         │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│                                                                     │\n└─────────────────────────────────────────────────────────────────────┘\n\n\nC3) Backlog - Prioritized Tasks\nHigh Priority (Now)\n\n Complete Authelia TOTP setup\n Deploy Photoprism with proper auth\n Setup Vaultwarden\n Document all credentials in LOCAL_KEYS\n\nMedium Priority (Next)\n\n Build monitoring collectors\n Create Cloud Portal MVP\n Setup architecture specs system\n Configure email alerts\n\nLow Priority (Later)\n\n Terminal services (ttyd, code-server)\n Workflow engines (Temporal, LangGraph)\n AI Chat integration\n GPU on-demand provisioning\n\nTech Debt\n\n Consolidate docker-compose files\n Standardize environment variables\n Create backup automation scripts\n Document disaster recovery procedures\n\n\nD) DevOps - Operations &amp; Observability\nD1) Portal - Cloud Control Center (C3)\nStack: Homepage (gethomepage.dev) + Uptime Kuma\n┌─────────────────────────────────────────────────────────────────────────┐\n│  CLOUD CONTROL CENTER (C3)                    cloud.diegonmarcos.com    │\n├─────────────────────────────────────────────────────────────────────────┤\n│                                                                         │\n│  01. HOMEPAGE (Service Launcher)                                        │\n│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │\n│  │   📧 Mail   │  │   📂 Sync   │  │   📷 Photos │  │   🔐 Vault  │    │\n│  │   ● online  │  │   ● online  │  │   ● online  │  │   ○ offline │    │\n│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘    │\n│                                                                         │\n│  10. UPTIME KUMA (status.diegonmarcos.com)                             │\n│  ┌─────────────────────────────────────────────────────────────────┐   │\n│  │  All Systems Operational  ████████████████████████████ 99.9%    │   │\n│  └─────────────────────────────────────────────────────────────────┘   │\n│                                                                         │\n│  11. DOCKGE (dockge.diegonmarcos.com)     21. DOZZLE (logs)            │\n│  ┌──────────────────────────┐             ┌──────────────────────────┐ │\n│  │  Stacks: 8 running       │             │  Container logs viewer   │ │\n│  └──────────────────────────┘             └──────────────────────────┘ │\n│                                                                         │\n└─────────────────────────────────────────────────────────────────────────┘\n\nC3 Components:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCodeServiceURLPurpose01Homepagecloud.diegonmarcos.comService launcher + widgets10Uptime Kumastatus.diegonmarcos.comHealth checks + public status11Dockgedockge.diegonmarcos.comDocker Compose management20Borgmatic(cron)Automated backups21Dozzlelogs.diegonmarcos.comReal-time container logs22Trivy(cron)Container vulnerability scans\n\nD2) Monitoring - Uptime Kuma\nTool: Uptime Kuma (status.diegonmarcos.com)\nMonitoring Architecture\n┌─────────────────────────────────────────────────────────────────────┐\n│                         UPTIME KUMA                                  │\n│                   status.diegonmarcos.com                            │\n├─────────────────────────────────────────────────────────────────────┤\n│                                                                     │\n│  Monitor Types:                                                     │\n│  • HTTP(s) - Website/API availability                               │\n│  • TCP Port - Service port checks                                   │\n│  • Ping - Host availability                                         │\n│  • DNS - DNS resolution checks                                      │\n│  • Docker - Container health                                        │\n│                                                                     │\n│  Notifications:                                                     │\n│  • Email (SMTP via Mailu)                                          │\n│  • Discord/Telegram webhooks                                        │\n│  • Pushover / Gotify                                               │\n│                                                                     │\n│  Features:                                                          │\n│  • Public status page (badge embeds)                               │\n│  • Incident history                                                │\n│  • Response time graphs                                            │\n│  • Multi-language                                                  │\n│                                                                     │\n└─────────────────────────────────────────────────────────────────────┘\n\nMonitor Configuration\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nServiceTypeIntervalTimeoutNPM ProxyHTTP60s10sAutheliaHTTP60s10sMail (SMTP)TCP:25300s30sAnalyticsHTTP300s10sPhotosHTTP300s10sSyncHTTP300s10s\nAlert Thresholds\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMetricWarningCriticalActionResponse Time&gt;2s&gt;5sEmail alertConsecutive Fails25Email + restartCertificate Expiry14 days7 daysEmail alert\n\nD3) Knowledge Center\nArchitecture Docs\nPlan: 0.spec/Task_ArchSpecs/PLAN_ArchSpecs.md\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDocumentPurposeFormatMASTERPLAN.mdThis documentMarkdownService specsPer-service detailsJSON + MDNetwork diagramsTopology visualizationMermaid\nAPI Docs\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEndpointDocumentation/api/v1/*OpenAPI 3.0 specService APIsPer-service Swagger\nWiki / FAQ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTopicContentGetting StartedHow to access servicesTroubleshootingCommon issues &amp; fixesRunbooksOperational procedures\n\nD4) Code Practices\n\nReference: MASTERPLAN_LINKTREE.md → D8) Code Practices (full details)\n\nBackend (Python)\nCategory          | Standard\n──────────────────┼────────────────────────────────────────────────────────\nLanguage          | Python 3.11+ with type hints\nPackage Manager   | Poetry (NOT pip install globally)\nFramework         | Flask for APIs, FastAPI for async\nTemplating        | Jinja2 for HTML/email/config generation\nData Processing   | Pandas for DataFrames, xsv for heavy CSV\nTesting           | pytest + pytest-cov\nLinting           | ruff (replaces flake8, isort, black)\n\nInfrastructure Code\nCategory          | Standard\n──────────────────┼────────────────────────────────────────────────────────\nIaC               | Docker Compose (no Kubernetes for personal infra)\nConfig Management | Jinja2 templates → YAML/TOML\nSecrets           | Environment variables, never in code\nShell Scripts     | Bash with shellcheck, set -euo pipefail\n\nDocker Compose Standards\n# Standard pattern for all services\nversion: &quot;3.8&quot;\nservices:\n  app:\n    image: ${IMAGE}:${VERSION:-latest}\n    container_name: ${SERVICE}-app\n    restart: unless-stopped\n    networks:\n      - internal\n    volumes:\n      - ./data:/data:rw\n      - ./config:/config:ro\n    environment:\n      - TZ=${TZ:-Europe/Berlin}\n    healthcheck:\n      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:${PORT}/health&quot;]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    labels:\n      - &quot;com.centurylinklabs.watchtower.enable=true&quot;\n \nnetworks:\n  internal:\n    driver: bridge\n\nD5) System Practices\nPackage Management\nRule: NEVER install packages system-wide. Use isolated environments.\nTool              | Purpose                    | Command\n──────────────────┼────────────────────────────┼────────────────────────────────\nPoetry            | Python dependencies        | poetry add &lt;package&gt;\npipx              | Python CLI tools           | pipx install &lt;tool&gt;\nnvm               | Node.js versions           | nvm use 18\nnpm (local)       | JS dependencies            | npm install (in project)\nDocker            | Service isolation          | docker compose up\n\nPoetry Workflow\n# Initialize new project\ncd /path/to/project\npoetry init\n \n# Add dependencies\npoetry add flask jinja2 requests\npoetry add --group dev pytest ruff\n \n# Run commands in virtual environment\npoetry run python script.py\npoetry run pytest\n \n# Install from pyproject.toml\npoetry install\n \n# Export requirements.txt (for Docker)\npoetry export -f requirements.txt -o requirements.txt\nProject Structure (Python Backend)\n/&lt;service&gt;/\n├── pyproject.toml           # Poetry config + dependencies\n├── poetry.lock              # Locked versions\n├── src/\n│   └── &lt;service&gt;/\n│       ├── __init__.py\n│       ├── main.py          # Entry point\n│       ├── api/             # API routes\n│       ├── services/        # Business logic\n│       ├── models/          # Data models\n│       └── utils/           # Helpers\n├── tests/\n│   └── test_*.py\n├── templates/               # Jinja2 templates\n├── config/\n│   └── settings.py          # Pydantic settings\n├── Dockerfile\n├── docker-compose.yml\n└── .env.example\n\nShell Script Standards\n#!/usr/bin/env bash\nset -euo pipefail  # Exit on error, undefined vars, pipe failures\n \n# Constants at top\nreadonly SCRIPT_DIR=&quot;$(cd &quot;$(dirname &quot;${BASH_SOURCE[0]}&quot;)&quot; &amp;&amp; pwd)&quot;\nreadonly LOG_FILE=&quot;/var/log/script.log&quot;\n \n# Functions before main logic\nlog() { echo &quot;[$(date +&#039;%Y-%m-%d %H:%M:%S&#039;)] $*&quot; | tee -a &quot;$LOG_FILE&quot;; }\ndie() { log &quot;ERROR: $*&quot;; exit 1; }\n \n# Main logic\nmain() {\n    log &quot;Starting...&quot;\n    # ...\n    log &quot;Done.&quot;\n}\n \nmain &quot;$@&quot;\nEnvironment Variables\n# .env.example (committed to git)\nSERVICE_NAME=myservice\nSERVICE_PORT=8080\nDATABASE_URL=postgresql://localhost:5432/mydb\n# SECRET_KEY=  # Never commit actual secrets\n \n# .env (NOT committed, in .gitignore)\nSECRET_KEY=actual-secret-here\nGit Practices\nPattern           | Rule\n──────────────────┼────────────────────────────────────────────────────────\n.gitignore        | Always include: .env, __pycache__, node_modules, dist/\nCommits           | Conventional: feat:, fix:, docs:, chore:, refactor:\nBranches          | main (production), dev (integration), feature/*\nSecrets           | NEVER commit, use .env + .gitignore\nLarge files       | Use Git LFS or external storage\n\nSystemd Services (for non-Docker)\n# /etc/systemd/system/myservice.service\n[Unit]\nDescription=My Service\nAfter=network.target\n \n[Service]\nType=simple\nUser=diego\nWorkingDirectory=/home/diego/services/myservice\nExecStart=/home/diego/.local/bin/poetry run python -m myservice\nRestart=always\nRestartSec=5\nEnvironment=PYTHONUNBUFFERED=1\n \n[Install]\nWantedBy=multi-user.target\nBackup Strategy\nData Type         | Method                     | Frequency     | Retention\n──────────────────┼────────────────────────────┼───────────────┼─────────────\nConfigs           | Git push                   | On change     | Forever\nUser data         | Syncthing                  | Real-time     | 30 days\nDatabases         | pg_dump / mysqldump        | Daily 3AM     | 7 days\nVM snapshots      | Cloud provider             | Weekly        | 4 weeks\nLOCAL_KEYS        | Manual to encrypted USB    | Monthly       | Forever\n\n\nFile Structure\n/home/diego/Documents/Git/back-System/cloud/\n├── 0.spec/\n│   ├── MASTERPLAN_CLOUD.md              # THIS FILE (Product-Engineer Handoff)\n│   │\n│   ├── Task_Security2faOAuth20/         # B1) Security Architecture\n│   │   └── PLAN_DualAuth_Security.md\n│   │\n│   └── Task_ArchSpecs/                  # B2) Service Architecture\n│       └── PLAN_ArchSpecs.md\n│\n├── 1.ops/\n│   ├── cloud_dash.json                  # Services data (source of truth)\n│   ├── cloud_dash.py                    # Flask API server\n│   └── vm-control.sh                    # VM start/stop script\n│\n├── 2.app/                               # C3 Docker Compose stacks\n│   ├── c3-homepage/                     # 01 Homepage dashboard\n│   │   ├── docker-compose.yml\n│   │   └── config/\n│   │       ├── services.yaml\n│   │       └── bookmarks.yaml\n│   ├── c3-uptime-kuma/                  # 10 Uptime Kuma\n│   │   └── docker-compose.yml\n│   ├── c3-dockge/                       # 11 Dockge\n│   │   └── docker-compose.yml\n│   ├── c3-borgmatic/                    # 20 Borgmatic\n│   │   ├── docker-compose.yml\n│   │   └── borgmatic.yaml\n│   ├── c3-dozzle/                       # 21 Dozzle\n│   │   └── docker-compose.yml\n│   └── c3-trivy/                        # 22 Trivy\n│       └── trivy-scan.sh\n│\n├── vps_oracle/\n│   ├── vm-oci-f-micro_1/               # Mail VM\n│   ├── vm-oci-f-micro_2/               # Analytics VM\n│   └── vm-oci-p-flex_1/                # Dev services VM (hosts C3)\n│\n└── vps_gcloud/\n    └── vm-gcp-f-micro_1/               # Proxy + Auth VM\n\n\nDocument Map\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSectionPurposeOwnerA) HANDOFFComplete service &amp; stack definitionProduct + EngineerA0-A1Stack choices + Service catalogProduct definesA2-A3Resources + InfrastructureEngineer validatesA4-A5Tech research + Current stateBoth collaborateB) ARCHITECTURETechnical deep divesEngineer ownsB1Security patternsEngineerB2Service patternsEngineerB3Infrastructure patternsEngineerC) ROADMAPPlanning &amp; prioritizationProduct + EngineerC1-C3Phases, dependencies, backlogBoth collaborateD) DEVOPSOperations &amp; observabilityEngineer ownsD1-D3Portal, monitoring, docsEngineer\n\nQuick Reference\nService URLs\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nServiceURLAuthNPM Adminhttp://34.55.55.234:81LocalAutheliaauth.diegonmarcos.com-Mailhttps://mail.diegonmarcos.comAutheliaAnalyticshttps://analytics.diegonmarcos.comAuthelian8nhttps://n8n.diegonmarcos.comAutheliaGiteahttps://git.diegonmarcos.comAutheliaSynchttps://sync.diegonmarcos.comAutheliaVaulthttps://vault.diegonmarcos.comAutheliaPhotoshttps://photos.diegonmarcos.comAutheliaCloudhttps://cloud.diegonmarcos.comAuthelia\n\nGenerated by Claude (Opus) - CTO\nLast Updated: 2025-12-11"}}